!function o(a,s,u){function l(r,e){if(!s[r]){if(!a[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(c)return c(r,!0);var n=new Error("Cannot find module '"+r+"'");throw n.code="MODULE_NOT_FOUND",n}var i=s[r]={exports:{}};a[r][0].call(i.exports,function(e){var t=a[r][1][e];return l(t||e)},i,i.exports,o,a,s,u)}return s[r].exports}for(var c="function"==typeof require&&require,e=0;e<u.length;e++)l(u[e]);return l}({1:[function(e,t,r){var n=window.$=e("browserify-zepto"),i=e("../index.js"),o=n("#viewData").html(),a=document.getElementById("canvas-container");a.width=document.body.clientWidth,a.height=document.body.clientHeight,canvasW=a.width,canvasH=a.height;var s=e("gl-now")({element:"canvas-container",clearColor:[0,0,0,1],glOptions:{alpha:!1}});(window.shell=s).preventDefaults=!1,s.on("gl-init",function(){i.init(s.gl),i.importData(o)}),s.on("gl-error",function(e){throw document.write("Oops! Looks like WebGL isn't supported :("),new Error("WebGL not supported :(")}),s.on("gl-render",function(e){!function(){var e=[0,0];u&&(e=[(c[0]-l[0])/-200,(c[1]-l[1])/-200]);f[0]+=.1*(e[0]-f[0]),f[1]+=.1*(e[1]-f[1])}(),i.paint(f[1],f[0])});var u=!1,l=[0,0],c=[0,0],f=[0,0];n("body").bind("mousedown touchstart",function(e){if(e.originalEvent&&(e=e.originalEvent),"CANVAS"===e.target.nodeName){e.preventDefault(),u=!0;var t=e.touches?e.touches[0]:e;c=l=[t.pageX,t.pageY]}}),n("body").bind("mousemove touchmove ",function(e){if(e.originalEvent&&(e=e.originalEvent),"CANVAS"===e.target.nodeName){e.preventDefault();var t=e.touches?e.touches[0]:e;c=[t.pageX,t.pageY]}}),n("body").bind("mouseup touchend",function(e){e.originalEvent&&(e=e.originalEvent),e.preventDefault(),u=!1})},{"../index.js":2,"browserify-zepto":6,"gl-now":44}],2:[function(e,t,r){"use strict";var f,s,u,l,c,h,p,d,g,m,y,n,v,_,b,w,E,i=!0,o=0,a=.05,A=.5,x=!1,T=(e("glslify"),e("gl-buffer")),R=e("gl-vao"),j=e("gl-mat4"),S=e("gl-fbo"),I=e("gl-texture2d"),L=e("glslify/adapter.js")("\n#define GLSLIFY 1\n\nprecision mediump float;\nattribute vec4 position;\nattribute vec4 vertColor;\nuniform float perspective;\nuniform mat4 camera;\nvarying vec4 fragColor;\nvoid main() {\n  vec4 pos = 2.0 * position - 1.0;\n  pos.z = pos.z * 0.75 + 0.25;\n  pos = camera * pos;\n  float w = 1.0 + perspective * (pos.z);\n  pos.z = pos.z * 0.5;\n  gl_Position = vec4(pos.xyz, w);\n  fragColor = vertColor;\n}","\n#define GLSLIFY 1\n\nprecision mediump float;\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = fragColor;\n}",[{name:"perspective",type:"float"},{name:"camera",type:"mat4"}],[{name:"position",type:"vec4"},{name:"vertColor",type:"vec4"}]),N=e("glslify/adapter.js")("\n#define GLSLIFY 1\n\nprecision mediump float;\nattribute vec2 position;\nuniform float multY;\nvarying vec2 uv;\nvoid main() {\n  gl_Position = vec4(position, 0.0, 1.0);\n  uv = position * vec2(1.0, multY);\n  uv = 0.5 * (uv + 1.0);\n}","\n#define GLSLIFY 1\n\nprecision mediump float;\nuniform sampler2D buffer;\nvarying vec2 uv;\nvoid main() {\n  gl_FragColor = texture2D(buffer, uv);\n}",[{name:"multY",type:"float"},{name:"buffer",type:"sampler2D"}],[{name:"position",type:"vec2"}]),F=e("glslify/adapter.js")("\n#define GLSLIFY 1\n\nprecision mediump float;\nattribute vec2 position;\nuniform float multY;\nvarying vec2 uv;\nvoid main() {\n  gl_Position = vec4(position, 0.0, 1.0);\n  uv = position * vec2(1.0, multY);\n  uv = 0.5 * (uv + 1.0);\n}","\n#define GLSLIFY 1\n\nprecision highp float;\nuniform float inputDim;\nuniform sampler2D bufferA;\nuniform sampler2D bufferB;\nconst float mag = 255.0;\nvarying vec2 uv;\nvoid main() {\n  float ip = 1.0 / inputDim;\n  float op = ip * 4.0;\n  vec2 p = vec2(floor(uv.x / op) * op, floor(uv.y / op) * op);\n  float sum = 0.0;\n  vec2 offset = vec2(0.0);\n  vec3 diff;\n  for(int i = 0; i < 4; ++i) {\n    for(int j = 0; j < 4; ++j) {\n      diff = texture2D(bufferA, p + offset).rgb - texture2D(bufferB, p + offset).rgb;\n      sum += dot(diff, diff);\n      offset.y += ip;\n    }\n    offset.x += ip;\n    offset.y = 0.0;\n  }\n  float avg = sum / 16.0;\n  avg /= 3.0;\n  float r = floor(avg * mag) / mag;\n  float g = floor((avg - r) * mag * mag) / mag;\n  float b = ((avg - r) * mag - g) * mag;\n  gl_FragColor = vec4(r, g, b, 1.0);\n}",[{name:"multY",type:"float"},{name:"inputDim",type:"float"},{name:"bufferA",type:"sampler2D"},{name:"bufferB",type:"sampler2D"}],[{name:"position",type:"vec2"}]),P=e("glslify/adapter.js")("\n#define GLSLIFY 1\n\nprecision mediump float;\nattribute vec2 position;\nuniform float multY;\nvarying vec2 uv;\nvoid main() {\n  gl_Position = vec4(position, 0.0, 1.0);\n  uv = position * vec2(1.0, multY);\n  uv = 0.5 * (uv + 1.0);\n}","\n#define GLSLIFY 1\n\nprecision highp float;\nuniform float inputDim;\nuniform sampler2D buffer;\nconst float mag = 255.0;\nvarying vec2 uv;\nvoid main() {\n  float ip = 1.0 / inputDim;\n  float op = ip * 4.0;\n  vec2 p = vec2(floor(uv.x / op) * op, floor(uv.y / op) * op);\n  float sum = 0.0;\n  vec2 offset = vec2(0.0);\n  vec4 col;\n  for(int i = 0; i < 4; ++i) {\n    for(int j = 0; j < 4; ++j) {\n      col = texture2D(buffer, p + offset);\n      sum += col.r + (col.g + col.b / mag) / mag;\n      offset.y += ip;\n    }\n    offset.x += ip;\n    offset.y = 0.0;\n  }\n  float avg = sum / 16.0;\n  float r = floor(avg * mag) / mag;\n  float g = floor((avg - r) * mag * mag) / mag;\n  float b = ((avg - r) * mag - g) * mag;\n  gl_FragColor = vec4(r, g, b, 1.0);\n}",[{name:"multY",type:"float"},{name:"inputDim",type:"float"},{name:"buffer",type:"sampler2D"}],[{name:"position",type:"vec2"}]),O=e("./polydata");O.setAlphaRange(a,A);var M="screen",k=!1,D=Math.random,U=Math.floor;function B(e,t,r){V(t,c,y,6,["multY","buffer"],[r?-1:1,e])}function C(e,t,r){n=r||j.create(),V(e,l,m,O.numVerts,["perspective","camera"],[t,n])}function V(e,t,r,n,i,o){e==M||(e.bind(),f.colorMask(!0,!0,!0,!0),f.clear(f.COLOR_BUFFER_BIT),f.colorMask(!0,!0,!0,!1)),t.bind();for(var a=0,s=0;s<i.length;s++){var u=i[s],l=o[s];"function"==typeof l.bind?t.uniforms[u]=l.bind(a++):t.uniforms[u]=l}r.bind(),r.draw(f.TRIANGLES,n),r.unbind()}function Y(e,t){var r=e.shape[0],n=e.shape[1],i=new Uint8Array(r*n*4),o=new Uint8Array(r*n*4);e.bind(),f.readPixels(0,0,r,n,f.RGBA,f.UNSIGNED_BYTE,i),t.bind(),f.readPixels(0,0,r,n,f.RGBA,f.UNSIGNED_BYTE,o);for(var a=0,s=0;s<i.length;s+=4){var u=i[s]-o[s],l=i[s+1]-o[s+1],c=i[s+2]-o[s+2];a+=u*u+l*l+c*c}return 100*(1-(a/=256)/r/n/128)}function z(e,t){var r,n,i;for(r=["multY","inputDim","bufferA","bufferB"],n=[1,e.shape[0],e.color[0],t.color[0]],V(E[0],h,y,6,r,n),i=1;i<E.length;i++)r=["multY","inputDim","buffer"],n=[1,E[i-1].shape[0],E[i-1].color[0]],V(E[i],p,y,6,r,n);var o=E[E.length-1],a=o.shape[0],s=new Uint8Array(a*a*4);o.bind(),f.readPixels(0,0,a,a,f.RGBA,f.UNSIGNED_BYTE,s);var u=0;for(i=0;i<s.length;i+=4)u+=s[i]+(s[i+1]+s[i+2]/255)/255;return 100*(1-3*u/a/a/128)}var G={init:function(e,t,r){if(!e)throw new Error("Need a reference to a gl context");f=e;var n=parseInt(r);s=n&&16<=n?n:256,_=t?I(f,t):null,f.disable(f.DEPTH_TEST),f.enable(f.BLEND),f.blendFunc(f.SRC_ALPHA,f.ONE_MINUS_SRC_ALPHA),l=L(f),c=N(f),_&&(h=F(f),p=P(f)),(b=S(f,[s,s],{color:1})).drawn=!1,w=S(f,[s,s],{color:1}),E=[];for(var i=s/4;16<=i;){var o=S(f,[i,i],{color:1});E.push(o),i/=4}if(0===E.length)throw new Error('Comparison framebuffer is too small - increase "fboSize"');O.init(1),d=T(f,O.vertArr),g=T(f,O.colArr),v=!1,m=R(f,[{buffer:d,type:f.FLOAT,size:3},{buffer:g,type:f.FLOAT,size:4}]);var a=T(f,[-1,-1,-1,1,1,-1,1,1,-1,1,1,-1]);y=R(f,[{buffer:a,type:f.FLOAT,size:2}]),_&&B(_,b,!0),u=-1e5,k=!0},runGeneration:function(){if(k&&_){O.cacheDataNow();var e=O.numVerts;!function(){var e,t,r=0;for(t=U(6*D()),e=0;e<t;e++)O.mutateValue(),r++;for(t=U(6*D()*D()),e=0;e<t;e++)O.mutateVertex(),r++;D()<.2&&(O.addPoly(),r++),D()<.3&&(O.clonePoly(),r++),D()<.3&&(O.removePoly(),r++),0===r&&O.mutateValue()}(),O.sortPolygonsByZ(),d.update(O.vertArr),g.update(O.colArr),v=!1,C(w,.2,null);var t=(i?z:Y)(b,w),r=u<t;O.numVerts<e&&(r=u-o<=t),r?u=t:(O.restoreCachedData(),v=!0)}},paint:function(e,t){k&&(v&&(d.update(O.vertArr),g.update(O.colArr)),n=j.create(),j.rotateY(n,n,t),j.rotateX(n,n,e),C(M,.2,n))},paintReference:function(){k&&_&&B(b.color[0],M,!1)},paintScratchBuffer:function(){k&&B(w.color[0],M,!1)},exportData:function(){return"vert-xyz,"+O.vertArr.join()+"\n,col-rgba,"+O.colArr.join()},importData:function(e){var t,r=[],n=[];e.split(",").forEach(function(e){-1<e.indexOf("vert-xyz")?t=r:-1<e.indexOf("col-rgba")?t=n:t.push(parseFloat(e))}),r.length/3==n.length/4&&(O.setArrays(r,n),d.update(O.vertArr),g.update(O.colArr),_&&(C(w,.2,null),u=(i?z:Y)(b,w)))}};function X(e,t){a=e,A=t,O.setAlphaRange(e,t)}Object.defineProperty(G,"score",{get:function(){return u}}),Object.defineProperty(G,"numPolys",{get:function(){return O.numVerts/3}}),Object.defineProperty(G,"compareonGPU",{get:function(){return i},set:function(e){i=!!e}}),Object.defineProperty(G,"fewerPolysTolerance",{get:function(){return o},set:function(e){o=e,console.log(e)}}),Object.defineProperty(G,"useFlatPolys",{get:function(){return x},set:function(e){x=!!e,O.setFlattenedness(x)}}),Object.defineProperty(G,"minAlpha",{get:function(){return a},set:function(e){X(e,A)}}),Object.defineProperty(G,"maxAlpha",{get:function(){return A},set:function(e){X(a,e)}}),t.exports=G},{"./polydata":72,"gl-buffer":18,"gl-fbo":19,"gl-mat4":29,"gl-texture2d":49,"gl-vao":53,glslify:55,"glslify/adapter.js":54}],3:[function(e,t,r){!function(e){"use strict";var c="undefined"!=typeof Uint8Array?Uint8Array:Array,r="+".charCodeAt(0),n="/".charCodeAt(0),i="0".charCodeAt(0),o="a".charCodeAt(0),a="A".charCodeAt(0);function f(e){var t=e.charCodeAt(0);return t===r?62:t===n?63:t<i?-1:t<i+10?t-i+26+26:t<a+26?t-a:t<o+26?t-o+26:void 0}e.toByteArray=function(e){var t,r,n,i,o,a;if(0<e.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var s=e.length;o="="===e.charAt(s-2)?2:"="===e.charAt(s-1)?1:0,a=new c(3*e.length/4-o),n=0<o?e.length-4:e.length;var u=0;function l(e){a[u++]=e}for(r=t=0;t<n;t+=4,r+=3)l((16711680&(i=f(e.charAt(t))<<18|f(e.charAt(t+1))<<12|f(e.charAt(t+2))<<6|f(e.charAt(t+3))))>>16),l((65280&i)>>8),l(255&i);return 2===o?l(255&(i=f(e.charAt(t))<<2|f(e.charAt(t+1))>>4)):1===o&&(l((i=f(e.charAt(t))<<10|f(e.charAt(t+1))<<4|f(e.charAt(t+2))>>2)>>8&255),l(255&i)),a},e.fromByteArray=function(e){var t,r,n,i,o=e.length%3,a="";function s(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)}for(t=0,n=e.length-o;t<n;t+=3)r=(e[t]<<16)+(e[t+1]<<8)+e[t+2],a+=s((i=r)>>18&63)+s(i>>12&63)+s(i>>6&63)+s(63&i);switch(o){case 1:a+=s((r=e[e.length-1])>>2),a+=s(r<<4&63),a+="==";break;case 2:a+=s((r=(e[e.length-2]<<8)+e[e.length-1])>>10),a+=s(r>>4&63),a+=s(r<<2&63),a+="="}return a}}(void 0===r?this.base64js={}:r)},{}],4:[function(e,t,r){"use strict";function i(e,t,r,n,i,o){var a=["function ",e,"(a,l,h,",n.join(","),"){",o?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",i?".get(m)":"[m]"];return o?t.indexOf("c")<0?a.push(";if(x===y){return m}else if(x<=y){"):a.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):a.push(";if(",t,"){i=m;"),r?a.push("l=m+1}else{h=m-1}"):a.push("h=m-1}else{l=m+1}"),a.push("}"),o?a.push("return -1};"):a.push("return i};"),a.join("")}function n(e,t,r,n){return new Function([i("A","x"+e+"y",t,["y"],!1,n),i("B","x"+e+"y",t,["y"],!0,n),i("P","c(x,y)"+e+"0",t,["y","c"],!1,n),i("Q","c(x,y)"+e+"0",t,["y","c"],!0,n),"function dispatchBsearch",r,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",r].join(""))()}t.exports={ge:n(">=",!1,"GE"),gt:n(">",!1,"GT"),lt:n("<",!0,"LT"),le:n("<=",!0,"LE"),eq:n("-",!0,"EQ",!0)}},{}],5:[function(e,t,r){"use strict";"use restrict";function n(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}r.INT_BITS=32,r.INT_MAX=2147483647,r.INT_MIN=-1<<31,r.sign=function(e){return(0<e)-(e<0)},r.abs=function(e){var t=e>>31;return(e^t)-t},r.min=function(e,t){return t^(e^t)&-(e<t)},r.max=function(e,t){return e^(e^t)&-(e<t)},r.isPow2=function(e){return!(e&e-1||!e)},r.log2=function(e){var t,r;return t=(65535<e)<<4,t|=r=(255<(e>>>=t))<<3,t|=r=(15<(e>>>=r))<<2,(t|=r=(3<(e>>>=r))<<1)|(e>>>=r)>>1},r.log10=function(e){return 1e9<=e?9:1e8<=e?8:1e7<=e?7:1e6<=e?6:1e5<=e?5:1e4<=e?4:1e3<=e?3:100<=e?2:10<=e?1:0},r.popCount=function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},r.countTrailingZeros=n,r.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1},r.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},r.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var i=new Array(256);!function(e){for(var t=0;t<256;++t){var r=t,n=t,i=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--i;e[t]=n<<i&255}}(i),r.reverse=function(e){return i[255&e]<<24|i[e>>>8&255]<<16|i[e>>>16&255]<<8|i[e>>>24&255]},r.interleave2=function(e,t){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},r.deinterleave2=function(e,t){return(e=65535&((e=16711935&((e=252645135&((e=858993459&((e=e>>>t&1431655765)|e>>>1))|e>>>2))|e>>>4))|e>>>16))<<16>>16},r.interleave3=function(e,t,r){return e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2),(e|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<2},r.deinterleave3=function(e,t){return(e=1023&((e=4278190335&((e=251719695&((e=3272356035&((e=e>>>t&1227133513)|e>>>2))|e>>>4))|e>>>8))|e>>>16))<<22>>22},r.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>n(e)+1}},{}],6:[function(Vd,Wd,Xd){var ro,Yd=Wd.exports=function(){var a,s,u,n,l,r,i=[],c=i.slice,o=i.filter,f=window.document,h={},t={},p={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},d=/^\s*<(\w+|!)[^>]*>/,g=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,m=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,y=/^(?:body|html)$/i,v=/([A-Z])/g,_=["val","css","html","text","data","width","height","offset"],e=f.createElement("table"),b=f.createElement("tr"),w={tr:f.createElement("tbody"),tbody:e,thead:e,tfoot:e,td:b,th:b,"*":f.createElement("div")},E=/complete|loaded|interactive/,A=/^[\w-]*$/,x={},T=x.toString,R={},j=f.createElement("div"),S={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},I=Array.isArray||function(e){return e instanceof Array};function L(e){return null==e?String(e):x[T.call(e)]||"object"}function N(e){return"function"==L(e)}function F(e){return null!=e&&e==e.window}function P(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function O(e){return"object"==L(e)}function M(e){return O(e)&&!F(e)&&Object.getPrototypeOf(e)==Object.prototype}function k(e){return"number"==typeof e.length}function D(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function U(e){return e in t?t[e]:t[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function B(e,t){return"number"!=typeof t||p[D(e)]?t:t+"px"}function C(e){return"children"in e?c.call(e.children):u.map(e.childNodes,function(e){if(1==e.nodeType)return e})}function V(e,t){return null==t?u(e):u(e).filter(t)}function Y(e,t,r,n){return N(t)?t.call(e,r,n):t}function z(e,t,r){null==r?e.removeAttribute(t):e.setAttribute(t,r)}function G(e,t){var r=e.className,n=r&&r.baseVal!==a;if(t===a)return n?r.baseVal:r;n?r.baseVal=t:e.className=t}function X(t){var e;try{return t?"true"==t||"false"!=t&&("null"==t?null:/^0/.test(t)||isNaN(e=Number(t))?/^[\[\{]/.test(t)?u.parseJSON(t):t:e):t}catch(e){return t}}return R.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var r=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(r)return r.call(e,t);var n,i=e.parentNode,o=!i;return o&&(i=j).appendChild(e),n=~R.qsa(i,t).indexOf(e),o&&j.removeChild(e),n},l=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},r=function(r){return o.call(r,function(e,t){return r.indexOf(e)==t})},R.fragment=function(e,t,r){var n,i,o;return g.test(e)&&(n=u(f.createElement(RegExp.$1))),n||(e.replace&&(e=e.replace(m,"<$1></$2>")),t===a&&(t=d.test(e)&&RegExp.$1),t in w||(t="*"),(o=w[t]).innerHTML=""+e,n=u.each(c.call(o.childNodes),function(){o.removeChild(this)})),M(r)&&(i=u(n),u.each(r,function(e,t){-1<_.indexOf(e)?i[e](t):i.attr(e,t)})),n},R.Z=function(e,t){return(e=e||[]).__proto__=u.fn,e.selector=t||"",e},R.isZ=function(e){return e instanceof R.Z},R.init=function(e,t){var r,n;if(!e)return R.Z();if("string"==typeof e)if("<"==(e=e.trim())[0]&&d.test(e))r=R.fragment(e,RegExp.$1,t),e=null;else{if(t!==a)return u(t).find(e);r=R.qsa(f,e)}else{if(N(e))return u(f).ready(e);if(R.isZ(e))return e;if(I(e))n=e,r=o.call(n,function(e){return null!=e});else if(O(e))r=[e],e=null;else if(d.test(e))r=R.fragment(e.trim(),RegExp.$1,t),e=null;else{if(t!==a)return u(t).find(e);r=R.qsa(f,e)}}return R.Z(r,e)},(u=function(e,t){return R.init(e,t)}).extend=function(t){var r,e=c.call(arguments,1);return"boolean"==typeof t&&(r=t,t=e.shift()),e.forEach(function(e){!function e(t,r,n){for(s in r)n&&(M(r[s])||I(r[s]))?(M(r[s])&&!M(t[s])&&(t[s]={}),I(r[s])&&!I(t[s])&&(t[s]=[]),e(t[s],r[s],n)):r[s]!==a&&(t[s]=r[s])}(t,e,r)}),t},R.qsa=function(e,t){var r,n="#"==t[0],i=!n&&"."==t[0],o=n||i?t.slice(1):t,a=A.test(o);return P(e)&&a&&n?(r=e.getElementById(o))?[r]:[]:1!==e.nodeType&&9!==e.nodeType?[]:c.call(a&&!n?i?e.getElementsByClassName(o):e.getElementsByTagName(t):e.querySelectorAll(t))},u.contains=f.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t&&(t=t.parentNode);)if(t===e)return!0;return!1},u.type=L,u.isFunction=N,u.isWindow=F,u.isArray=I,u.isPlainObject=M,u.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},u.inArray=function(e,t,r){return i.indexOf.call(t,e,r)},u.camelCase=l,u.trim=function(e){return null==e?"":String.prototype.trim.call(e)},u.uuid=0,u.support={},u.expr={},u.map=function(e,t){var r,n,i,o,a=[];if(k(e))for(n=0;n<e.length;n++)null!=(r=t(e[n],n))&&a.push(r);else for(i in e)null!=(r=t(e[i],i))&&a.push(r);return 0<(o=a).length?u.fn.concat.apply([],o):o},u.each=function(e,t){var r,n;if(k(e)){for(r=0;r<e.length;r++)if(!1===t.call(e[r],r,e[r]))return e}else for(n in e)if(!1===t.call(e[n],n,e[n]))return e;return e},u.grep=function(e,t){return o.call(e,t)},window.JSON&&(u.parseJSON=JSON.parse),u.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){x["[object "+t+"]"]=t.toLowerCase()}),u.fn={forEach:i.forEach,reduce:i.reduce,push:i.push,sort:i.sort,indexOf:i.indexOf,concat:i.concat,map:function(r){return u(u.map(this,function(e,t){return r.call(e,t,e)}))},slice:function(){return u(c.apply(this,arguments))},ready:function(e){return E.test(f.readyState)&&f.body?e(u):f.addEventListener("DOMContentLoaded",function(){e(u)},!1),this},get:function(e){return e===a?c.call(this):this[0<=e?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(r){return i.every.call(this,function(e,t){return!1!==r.call(e,t,e)}),this},filter:function(t){return N(t)?this.not(this.not(t)):u(o.call(this,function(e){return R.matches(e,t)}))},add:function(e,t){return u(r(this.concat(u(e,t))))},is:function(e){return 0<this.length&&R.matches(this[0],e)},not:function(t){var r=[];if(N(t)&&t.call!==a)this.each(function(e){t.call(this,e)||r.push(this)});else{var n="string"==typeof t?this.filter(t):k(t)&&N(t.item)?c.call(t):u(t);this.forEach(function(e){n.indexOf(e)<0&&r.push(e)})}return u(r)},has:function(e){return this.filter(function(){return O(e)?u.contains(this,e):u(this).find(e).size()})},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!O(e)?e:u(e)},last:function(){var e=this[this.length-1];return e&&!O(e)?e:u(e)},find:function(e){var r=this;return e?"object"==typeof e?u(e).filter(function(){var t=this;return i.some.call(r,function(e){return u.contains(e,t)})}):1==this.length?u(R.qsa(this[0],e)):this.map(function(){return R.qsa(this,e)}):[]},closest:function(e,t){var r=this[0],n=!1;for("object"==typeof e&&(n=u(e));r&&!(n?0<=n.indexOf(r):R.matches(r,e));)r=r!==t&&!P(r)&&r.parentNode;return u(r)},parents:function(e){for(var t=[],r=this;0<r.length;)r=u.map(r,function(e){if((e=e.parentNode)&&!P(e)&&t.indexOf(e)<0)return t.push(e),e});return V(t,e)},parent:function(e){return V(r(this.pluck("parentNode")),e)},children:function(e){return V(this.map(function(){return C(this)}),e)},contents:function(){return this.map(function(){return c.call(this.childNodes)})},siblings:function(e){return V(this.map(function(e,t){return o.call(C(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return u.map(this,function(e){return e[t]})},show:function(){return this.each(function(){var e,t,r;"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=(e=this.nodeName,h[e]||(t=f.createElement(e),f.body.appendChild(t),r=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==r&&(r="block"),h[e]=r),h[e]))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(t){var r=N(t);if(this[0]&&!r)var n=u(t).get(0),i=n.parentNode||1<this.length;return this.each(function(e){u(this).wrapAll(r?t.call(this,e):i?n.cloneNode(!0):n)})},wrapAll:function(e){if(this[0]){var t;for(u(this[0]).before(e=u(e));(t=e.children()).length;)e=t.first();u(e).append(this)}return this},wrapInner:function(i){var o=N(i);return this.each(function(e){var t=u(this),r=t.contents(),n=o?i.call(this,e):i;r.length?r.wrapAll(n):t.append(n)})},unwrap:function(){return this.parent().each(function(){u(this).replaceWith(u(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=u(this);(t===a?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(e){return u(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return u(this.pluck("nextElementSibling")).filter(e||"*")},html:function(r){return 0 in arguments?this.each(function(e){var t=this.innerHTML;u(this).empty().append(Y(this,r,e,t))}):0 in this?this[0].innerHTML:null},text:function(r){return 0 in arguments?this.each(function(e){var t=Y(this,r,e,this.textContent);this.textContent=null==t?"":""+t}):0 in this?this[0].textContent:null},attr:function(t,r){var e;return"string"!=typeof t||1 in arguments?this.each(function(e){if(1===this.nodeType)if(O(t))for(s in t)z(this,s,t[s]);else z(this,t,Y(this,r,e,this.getAttribute(t)))}):this.length&&1===this[0].nodeType?!(e=this[0].getAttribute(t))&&t in this[0]?this[0][t]:e:a},removeAttr:function(e){return this.each(function(){1===this.nodeType&&z(this,e)})},prop:function(t,r){return t=S[t]||t,1 in arguments?this.each(function(e){this[t]=Y(this,r,e,this[t])}):this[0]&&this[0][t]},data:function(e,t){var r="data-"+e.replace(v,"-$1").toLowerCase(),n=1 in arguments?this.attr(r,t):this.attr(r);return null!==n?X(n):a},val:function(t){return 0 in arguments?this.each(function(e){this.value=Y(this,t,e,this.value)}):this[0]&&(this[0].multiple?u(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(o){if(o)return this.each(function(e){var t=u(this),r=Y(this,o,e,t.offset()),n=t.offsetParent().offset(),i={top:r.top-n.top,left:r.left-n.left};"static"==t.css("position")&&(i.position="relative"),t.css(i)});if(!this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(e,t){if(arguments.length<2){var r=this[0],n=getComputedStyle(r,"");if(!r)return;if("string"==typeof e)return r.style[l(e)]||n.getPropertyValue(e);if(I(e)){var i={};return u.each(I(e)?e:[e],function(e,t){i[t]=r.style[l(t)]||n.getPropertyValue(t)}),i}}var o="";if("string"==L(e))t||0===t?o=D(e)+":"+B(e,t):this.each(function(){this.style.removeProperty(D(e))});else for(s in e)e[s]||0===e[s]?o+=D(s)+":"+B(s,e[s])+";":this.each(function(){this.style.removeProperty(D(s))});return this.each(function(){this.style.cssText+=";"+o})},index:function(e){return e?this.indexOf(u(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&i.some.call(this,function(e){return this.test(G(e))},U(e))},addClass:function(r){return r?this.each(function(e){n=[];var t=G(this);Y(this,r,e,t).split(/\s+/g).forEach(function(e){u(this).hasClass(e)||n.push(e)},this),n.length&&G(this,t+(t?" ":"")+n.join(" "))}):this},removeClass:function(t){return this.each(function(e){if(t===a)return G(this,"");n=G(this),Y(this,t,e,n).split(/\s+/g).forEach(function(e){n=n.replace(U(e)," ")}),G(this,n.trim())})},toggleClass:function(r,n){return r?this.each(function(e){var t=u(this);Y(this,r,e,G(this)).split(/\s+/g).forEach(function(e){(n===a?!t.hasClass(e):n)?t.addClass(e):t.removeClass(e)})}):this},scrollTop:function(e){if(this.length){var t="scrollTop"in this[0];return e===a?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var t="scrollLeft"in this[0];return e===a?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),r=this.offset(),n=y.test(t[0].nodeName)?{top:0,left:0}:t.offset();return r.top-=parseFloat(u(e).css("margin-top"))||0,r.left-=parseFloat(u(e).css("margin-left"))||0,n.top+=parseFloat(u(t[0]).css("border-top-width"))||0,n.left+=parseFloat(u(t[0]).css("border-left-width"))||0,{top:r.top-n.top,left:r.left-n.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||f.body;e&&!y.test(e.nodeName)&&"static"==u(e).css("position");)e=e.offsetParent;return e})}},u.fn.detach=u.fn.remove,["width","height"].forEach(function(n){var i=n.replace(/./,function(e){return e[0].toUpperCase()});u.fn[n]=function(t){var e,r=this[0];return t===a?F(r)?r["inner"+i]:P(r)?r.documentElement["scroll"+i]:(e=this.offset())&&e[n]:this.each(function(e){(r=u(this)).css(n,Y(this,t,e,r[n]()))})}}),["after","prepend","before","append"].forEach(function(t,a){var s=a%2;u.fn[t]=function(){var t,n,i=u.map(arguments,function(e){return"object"==(t=L(e))||"array"==t||null==e?e:R.fragment(e)}),o=1<this.length;return i.length<1?this:this.each(function(e,t){n=s?t:t.parentNode,t=0==a?t.nextSibling:1==a?t.firstChild:2==a?t:null;var r=u.contains(f.documentElement,n);i.forEach(function(e){if(o)e=e.cloneNode(!0);else if(!n)return u(e).remove();n.insertBefore(e,t),r&&function e(t,r){r(t);for(var n=0,i=t.childNodes.length;n<i;n++)e(t.childNodes[n],r)}(e,function(e){null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src||window.eval.call(window,e.innerHTML)})})})},u.fn[s?t+"To":"insert"+(a?"Before":"After")]=function(e){return u(e)[t](this),this}}),R.Z.prototype=u.fn,R.uniq=r,R.deserializeValue=X,u.zepto=R,u}();!function(c){var f,t=1,l=Array.prototype.slice,h=c.isFunction,p=function(e){return"string"==typeof e},d={},o={},r="onfocusin"in window,n={focus:"focusin",blur:"focusout"},g={mouseenter:"mouseover",mouseleave:"mouseout"};function m(e){return e._zid||(e._zid=t++)}function a(e,t,r,n){if((t=y(t)).ns)var i=(o=t.ns,new RegExp("(?:^| )"+o.replace(" "," .* ?")+"(?: |$)"));var o;return(d[m(e)]||[]).filter(function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||i.test(e.ns))&&(!r||m(e.fn)===m(r))&&(!n||e.sel==n)})}function y(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function v(e,t){return e.del&&!r&&e.e in n||!!t}function _(e){return g[e]||r&&n[e]||e}function b(i,e,t,o,a,s,u){var r=m(i),l=d[r]||(d[r]=[]);e.split(/\s/).forEach(function(e){if("ready"==e)return c(document).ready(t);var r=y(e);r.fn=t,r.sel=a,r.e in g&&(t=function(e){var t=e.relatedTarget;if(!t||t!==this&&!c.contains(this,t))return r.fn.apply(this,arguments)});var n=(r.del=s)||t;r.proxy=function(e){if(!(e=A(e)).isImmediatePropagationStopped()){e.data=o;var t=n.apply(i,e._args==f?[e]:[e].concat(e._args));return!1===t&&(e.preventDefault(),e.stopPropagation()),t}},r.i=l.length,l.push(r),"addEventListener"in i&&i.addEventListener(_(r.e),r.proxy,v(r,u))})}function w(t,e,r,n,i){var o=m(t);(e||"").split(/\s/).forEach(function(e){a(t,e,r,n).forEach(function(e){delete d[o][e.i],"removeEventListener"in t&&t.removeEventListener(_(e.e),e.proxy,v(e,i))})})}o.click=o.mousedown=o.mouseup=o.mousemove="MouseEvents",c.event={add:b,remove:w},c.proxy=function(e,t){var r=2 in arguments&&l.call(arguments,2);if(h(e)){var n=function(){return e.apply(t,r?r.concat(l.call(arguments)):arguments)};return n._zid=m(e),n}if(p(t))return r?(r.unshift(e[t],e),c.proxy.apply(null,r)):c.proxy(e[t],e);throw new TypeError("expected function")},c.fn.bind=function(e,t,r){return this.on(e,t,r)},c.fn.unbind=function(e,t){return this.off(e,t)},c.fn.one=function(e,t,r,n){return this.on(e,t,r,n,1)};var s=function(){return!0},E=function(){return!1},i=/^([A-Z]|returnValue$|layer[XY]$)/,e={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function A(n,i){return!i&&n.isDefaultPrevented||(i||(i=n),c.each(e,function(e,t){var r=i[e];n[e]=function(){return this[t]=s,r&&r.apply(i,arguments)},n[t]=E}),(i.defaultPrevented!==f?i.defaultPrevented:"returnValue"in i?!1===i.returnValue:i.getPreventDefault&&i.getPreventDefault())&&(n.isDefaultPrevented=s)),n}function x(e){var t,r={originalEvent:e};for(t in e)i.test(t)||e[t]===f||(r[t]=e[t]);return A(r,e)}c.fn.delegate=function(e,t,r){return this.on(t,e,r)},c.fn.undelegate=function(e,t,r){return this.off(t,e,r)},c.fn.live=function(e,t){return c(document.body).delegate(this.selector,e,t),this},c.fn.die=function(e,t){return c(document.body).undelegate(this.selector,e,t),this},c.fn.on=function(t,i,r,o,a){var s,u,n=this;return t&&!p(t)?(c.each(t,function(e,t){n.on(e,i,r,t,a)}),n):(p(i)||h(o)||!1===o||(o=r,r=i,i=f),(h(r)||!1===r)&&(o=r,r=f),!1===o&&(o=E),n.each(function(e,n){a&&(s=function(e){return w(n,e.type,o),o.apply(this,arguments)}),i&&(u=function(e){var t,r=c(e.target).closest(i,n).get(0);if(r&&r!==n)return t=c.extend(x(e),{currentTarget:r,liveFired:n}),(s||o).apply(r,[t].concat(l.call(arguments,1)))}),b(n,t,o,r,i,u||s)}))},c.fn.off=function(e,r,t){var n=this;return e&&!p(e)?(c.each(e,function(e,t){n.off(e,r,t)}),n):(p(r)||h(t)||!1===t||(t=r,r=f),!1===t&&(t=E),n.each(function(){w(this,e,t,r)}))},c.fn.trigger=function(e,t){return(e=p(e)||c.isPlainObject(e)?c.Event(e):A(e))._args=t,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(e):c(this).triggerHandler(e,t)})},c.fn.triggerHandler=function(r,n){var i,o;return this.each(function(e,t){(i=x(p(r)?c.Event(r):r))._args=n,i.target=t,c.each(a(t,r.type||r),function(e,t){if(o=t.proxy(i),i.isImmediatePropagationStopped())return!1})}),o},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){c.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)}}),["focus","blur"].forEach(function(t){c.fn[t]=function(e){return e?this.bind(t,e):this.each(function(){try{this[t]()}catch(e){}}),this}}),c.Event=function(e,t){p(e)||(e=(t=e).type);var r=document.createEvent(o[e]||"Events"),n=!0;if(t)for(var i in t)"bubbles"==i?n=!!t[i]:r[i]=t[i];return r.initEvent(e,n,!0),A(r)}}(Yd),function(em){var hm,im,fm=0,gm=window.document,jm=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,km=/^(?:text|application)\/javascript/i,lm=/^(?:text|application)\/xml/i,mm="application/json",nm="text/html",om=/^\s*$/;function qm(e,t,r,n){if(e.global)return i=t||gm,o=r,a=n,s=em.Event(o),em(i).trigger(s,a),!s.isDefaultPrevented();var i,o,a,s}function tm(e,t){var r=t.context;if(!1===t.beforeSend.call(r,e,t)||!1===qm(t,r,"ajaxBeforeSend",[e,t]))return!1;qm(t,r,"ajaxSend",[e,t])}function um(e,t,r,n){var i=r.context,o="success";r.success.call(i,e,o,t),n&&n.resolveWith(i,[e,o,t]),qm(r,i,"ajaxSuccess",[t,r,e]),wm(o,t,r)}function vm(e,t,r,n,i){var o=n.context;n.error.call(o,r,t,e),i&&i.rejectWith(o,[r,t,e]),qm(n,o,"ajaxError",[r,n,e||t]),wm(t,r,n)}function wm(e,t,r){var n,i=r.context;r.complete.call(i,t,e),qm(r,i,"ajaxComplete",[t,r]),(n=r).global&&!--em.active&&qm(n,null,"ajaxStop")}function xm(){}function zm(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function Bm(e,t,r,n){return em.isFunction(t)&&(n=r,r=t,t=void 0),em.isFunction(r)||(n=r,r=void 0),{url:e,data:t,success:r,dataType:n}}em.active=0,em.ajaxJSONP=function(r,n){if(!("type"in r))return em.ajax(r);var i,o,e=r.jsonpCallback,a=(em.isFunction(e)?e():e)||"jsonp"+ ++fm,s=gm.createElement("script"),u=window[a],t=function(e){em(s).triggerHandler("error",e||"abort")},l={abort:t};return n&&n.promise(l),em(s).on("load error",function(e,t){clearTimeout(o),em(s).off().remove(),"error"!=e.type&&i?um(i[0],l,r,n):vm(null,t||"error",l,r,n),window[a]=u,i&&em.isFunction(u)&&u(i[0]),u=i=void 0}),!1===tm(l,r)?t("abort"):(window[a]=function(){i=arguments},s.src=r.url.replace(/\?(.+)=\?/,"?$1="+a),gm.head.appendChild(s),0<r.timeout&&(o=setTimeout(function(){t("timeout")},r.timeout))),l},em.ajaxSettings={type:"GET",beforeSend:xm,success:xm,error:xm,complete:xm,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:mm,xml:"application/xml, text/xml",html:nm,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},em.ajax=function(xn){var Mm,wn,yn=em.extend({},xn||{}),zn=em.Deferred&&em.Deferred();for(hm in em.ajaxSettings)void 0===yn[hm]&&(yn[hm]=em.ajaxSettings[hm]);(Mm=yn).global&&0==em.active++&&qm(Mm,null,"ajaxStart"),yn.crossDomain||(yn.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(yn.url)&&RegExp.$2!=window.location.host),yn.url||(yn.url=window.location.toString()),(wn=yn).processData&&wn.data&&"string"!=em.type(wn.data)&&(wn.data=em.param(wn.data,wn.traditional)),!wn.data||wn.type&&"GET"!=wn.type.toUpperCase()||(wn.url=zm(wn.url,wn.data),wn.data=void 0);var An=yn.dataType,Bn=/\?.+=\?/.test(yn.url);if(Bn&&(An="jsonp"),!1!==yn.cache&&(xn&&!0===xn.cache||"script"!=An&&"jsonp"!=An)||(yn.url=zm(yn.url,"_="+Date.now())),"jsonp"==An)return Bn||(yn.url=zm(yn.url,yn.jsonp?yn.jsonp+"=?":!1===yn.jsonp?"":"callback=?")),em.ajaxJSONP(yn,zn);var In,Cn=yn.accepts[An],Dn={},En=function(e,t){Dn[e.toLowerCase()]=[e,t]},Fn=/^([\w-]+:)\/\//.test(yn.url)?RegExp.$1:window.location.protocol,Gn=yn.xhr(),Hn=Gn.setRequestHeader;if(zn&&zn.promise(Gn),yn.crossDomain||En("X-Requested-With","XMLHttpRequest"),En("Accept",Cn||"*/*"),(Cn=yn.mimeType||Cn)&&(-1<Cn.indexOf(",")&&(Cn=Cn.split(",",2)[0]),Gn.overrideMimeType&&Gn.overrideMimeType(Cn)),(yn.contentType||!1!==yn.contentType&&yn.data&&"GET"!=yn.type.toUpperCase())&&En("Content-Type",yn.contentType||"application/x-www-form-urlencoded"),yn.headers)for(im in yn.headers)En(im,yn.headers[im]);if(Gn.setRequestHeader=En,!(Gn.onreadystatechange=function(){if(4==Gn.readyState){Gn.onreadystatechange=xm,clearTimeout(In);var Mn,Nn=!1;if(200<=Gn.status&&Gn.status<300||304==Gn.status||0==Gn.status&&"file:"==Fn){An=An||((tn=yn.mimeType||Gn.getResponseHeader("content-type"))&&(tn=tn.split(";",2)[0]),tn&&(tn==nm?"html":tn==mm?"json":km.test(tn)?"script":lm.test(tn)&&"xml")||"text"),Mn=Gn.responseText;try{"script"==An?eval(Mn):"xml"==An?Mn=Gn.responseXML:"json"==An&&(Mn=om.test(Mn)?null:em.parseJSON(Mn))}catch(e){Nn=e}Nn?vm(Nn,"parsererror",Gn,yn,zn):um(Mn,Gn,yn,zn)}else vm(Gn.statusText||null,Gn.status?"error":"abort",Gn,yn,zn)}var tn})===tm(Gn,yn))return Gn.abort(),vm(null,"abort",Gn,yn,zn),Gn;if(yn.xhrFields)for(im in yn.xhrFields)Gn[im]=yn.xhrFields[im];var Jn=!("async"in yn)||yn.async;for(im in Gn.open(yn.type,yn.url,Jn,yn.username,yn.password),Dn)Hn.apply(Gn,Dn[im]);return 0<yn.timeout&&(In=setTimeout(function(){Gn.onreadystatechange=xm,Gn.abort(),vm(null,"timeout",Gn,yn,zn)},yn.timeout)),Gn.send(yn.data?yn.data:null),Gn},em.get=function(){return em.ajax(Bm.apply(null,arguments))},em.post=function(){var e=Bm.apply(null,arguments);return e.type="POST",em.ajax(e)},em.getJSON=function(){var e=Bm.apply(null,arguments);return e.dataType="json",em.ajax(e)},em.fn.load=function(e,t,r){if(!this.length)return this;var n,i=this,o=e.split(/\s/),a=Bm(e,t,r),s=a.success;return 1<o.length&&(a.url=o[0],n=o[1]),a.success=function(e){i.html(n?em("<div>").html(e.replace(jm,"")).find(n):e),s&&s.apply(i,arguments)},em.ajax(a),this};var Cm=encodeURIComponent;em.param=function(e,t){var r=[];return r.add=function(e,t){this.push(Cm(e)+"="+Cm(t))},function r(n,e,i,o){var a,s=em.isArray(e),u=em.isPlainObject(e);em.each(e,function(e,t){a=em.type(t),o&&(e=i?o:o+"["+(u||"object"==a||"array"==a?e:"")+"]"),!o&&s?n.add(t.name,t.value):"array"==a||!i&&"object"==a?r(n,t,i,e):n.add(e,t)})}(r,e,t),r.join("&").replace(/%20/g,"+")}}(Yd),(ro=Yd).fn.serializeArray=function(){var t,r=[];return ro([].slice.call(this.get(0).elements)).each(function(){var e=(t=ro(this)).attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=e&&"reset"!=e&&"button"!=e&&("radio"!=e&&"checkbox"!=e||this.checked)&&r.push({name:t.attr("name"),value:t.val()})}),r},ro.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},ro.fn.submit=function(e){if(e)this.bind("submit",e);else if(this.length){var t=ro.Event("submit");this.eq(0).trigger(t),t.isDefaultPrevented()||this.get(0).submit()}return this},function(r){"__proto__"in{}||r.extend(r.zepto,{Z:function(e,t){return e=e||[],r.extend(e,r.fn),e.selector=t||"",e.__Z=!0,e},isZ:function(e){return"array"===r.type(e)&&"__Z"in e}});try{getComputedStyle(void 0)}catch(e){var t=getComputedStyle;window.getComputedStyle=function(e){try{return t(e)}catch(e){return null}}}}(Yd)},{}],7:[function(e,t,r){var n=e("base64-js"),o=e("ieee754"),u=e("is-array");r.Buffer=c,r.SlowBuffer=c,r.INSPECT_MAX_BYTES=50,c.poolSize=8192;var l=1073741823;function c(e,t,r){if(!(this instanceof c))return new c(e,t,r);var n,i,o,a,s=typeof e;if("number"===s)n=0<e?e>>>0:0;else if("string"===s)"base64"===t&&(e=function(e){e=(t=e,t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(E,"");var t;for(;e.length%4!=0;)e+="=";return e}(e)),n=c.byteLength(e,t);else{if("object"!==s||null===e)throw new TypeError("must start with number, buffer, array or string");"Buffer"===e.type&&u(e.data)&&(e=e.data),n=0<+e.length?Math.floor(+e.length):0}if(this.length>l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");if(c.TYPED_ARRAY_SUPPORT?i=c._augment(new Uint8Array(n)):((i=this).length=n,i._isBuffer=!0),c.TYPED_ARRAY_SUPPORT&&"number"==typeof e.byteLength)i._set(e);else if(u(a=e)||c.isBuffer(a)||a&&"object"==typeof a&&"number"==typeof a.length)if(c.isBuffer(e))for(o=0;o<n;o++)i[o]=e.readUInt8(o);else for(o=0;o<n;o++)i[o]=(e[o]%256+256)%256;else if("string"===s)i.write(e,0,t);else if("number"===s&&!c.TYPED_ARRAY_SUPPORT&&!r)for(o=0;o<n;o++)i[o]=0;return i}function m(e,t,r,n){return R(function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function i(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function a(e,t,r){var n="",i="";r=Math.min(e.length,r);for(var o=t;o<r;o++)e[o]<=127?(n+=j(i)+String.fromCharCode(e[o]),i=""):i+="%"+e[o].toString(16);return n+j(i)}function s(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;i++)n+=String.fromCharCode(e[i]);return n}function f(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||n<r)&&(r=n);for(var i="",o=t;o<r;o++)i+=A(e[o]);return i}function h(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function p(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(r<e+t)throw new RangeError("Trying to access beyond buffer length")}function d(e,t,r,n,i,o){if(!c.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(i<t||t<o)throw new TypeError("value is out of bounds");if(r+n>e.length)throw new TypeError("index out of range")}function g(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;i++)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function y(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;i++)e[r+i]=t>>>8*(n?i:3-i)&255}function v(e,t,r,n,i,o){if(i<t||t<o)throw new TypeError("value is out of bounds");if(r+n>e.length)throw new TypeError("index out of range")}function _(e,t,r,n,i){return i||v(e,t,r,4,34028234663852886e22,-34028234663852886e22),o.write(e,t,r,n,23,4),r+4}function b(e,t,r,n,i){return i||v(e,t,r,8,17976931348623157e292,-17976931348623157e292),o.write(e,t,r,n,52,8),r+8}c.TYPED_ARRAY_SUPPORT=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(e){return!1}}(),c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o&&e[i]===t[i];i++);return i!==o&&(r=e[i],n=t[i]),r<n?-1:n<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!u(e))throw new TypeError("Usage: Buffer.concat(list[, length])");if(0===e.length)return new c(0);if(1===e.length)return e[0];var r;if(void 0===t)for(r=t=0;r<e.length;r++)t+=e[r].length;var n=new c(t),i=0;for(r=0;r<e.length;r++){var o=e[r];o.copy(n,i),i+=o.length}return n},c.byteLength=function(e,t){var r;switch(e+="",t||"utf8"){case"ascii":case"binary":case"raw":r=e.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=2*e.length;break;case"hex":r=e.length>>>1;break;case"utf8":case"utf-8":r=x(e).length;break;case"base64":r=T(e).length;break;default:r=e.length}return r},c.prototype.length=void 0,c.prototype.parent=void 0,c.prototype.toString=function(e,t,r){var n=!1;if(e||(e="utf8"),(t>>>=0)<0&&(t=0),(r=void 0===r||r===1/0?this.length:r>>>0)>this.length&&(r=this.length),r<=t)return"";for(;;)switch(e){case"hex":return f(this,t,r);case"utf8":case"utf-8":return a(this,t,r);case"ascii":return s(this,t,r);case"binary":return s(this,t,r);case"base64":return i(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return 0===c.compare(this,e)},c.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return c.compare(this,e)},c.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},c.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},c.prototype.write=function(e,t,r,n){if(isFinite(t))isFinite(r)||(n=r,r=void 0);else{var i=n;n=t,t=r,r=i}t=Number(t)||0;var o,a,s,u,l,c,f,h,p,d,g=this.length-t;switch(r?g<(r=Number(r))&&(r=g):r=g,n=String(n||"utf8").toLowerCase()){case"hex":o=function(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?i<(n=Number(n))&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new Error("Invalid hex string");o/2<n&&(n=o/2);for(var a=0;a<n;a++){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))throw new Error("Invalid hex string");e[r+a]=s}return a}(this,e,t,r);break;case"utf8":case"utf-8":h=this,p=t,d=r,o=R(x(e),h,p,d);break;case"ascii":o=m(this,e,t,r);break;case"binary":o=m(this,e,t,r);break;case"base64":l=this,c=t,f=r,o=R(T(e),l,c,f);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":a=this,s=t,u=r,o=R(function(e){for(var t,r,n,i=[],o=0;o<e.length;o++)t=e.charCodeAt(o),r=t>>8,n=t%256,i.push(n),i.push(r);return i}(e),a,s,u,2);break;default:throw new TypeError("Unknown encoding: "+n)}return o},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},c.prototype.slice=function(e,t){var r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)return c._augment(this.subarray(e,t));for(var n=t-e,i=new c(n,void 0,!0),o=0;o<n;o++)i[o]=this[o+e];return i},c.prototype.readUInt8=function(e,t){return t||p(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||p(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||p(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||p(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||p(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readInt8=function(e,t){return t||p(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||p(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){t||p(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return t||p(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||p(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||p(e,4,this.length),o.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||p(e,4,this.length),o.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||p(e,8,this.length),o.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||p(e,8,this.length),o.read(this,e,!1,52,8)},c.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||d(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e,t+1},c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||d(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):g(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||d(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):g(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||d(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e):y(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||d(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):y(this,e,t,!1),t+4},c.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||d(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||d(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):g(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||d(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):g(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||d(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):y(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||d(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):y(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,r){return _(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return _(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return b(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return b(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t||(t=0),n!==r&&0!==e.length&&0!==this.length){if(n<r)throw new TypeError("sourceEnd < sourceStart");if(t<0||t>=e.length)throw new TypeError("targetStart out of bounds");if(r<0||r>=this.length)throw new TypeError("sourceStart out of bounds");if(n<0||n>this.length)throw new TypeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i=n-r;if(i<1e3||!c.TYPED_ARRAY_SUPPORT)for(var o=0;o<i;o++)e[o+t]=this[o+r];else e._set(this.subarray(r,r+i),t)}},c.prototype.fill=function(e,t,r){if(e||(e=0),t||(t=0),r||(r=this.length),r<t)throw new TypeError("end < start");if(r!==t&&0!==this.length){if(t<0||t>=this.length)throw new TypeError("start out of bounds");if(r<0||r>this.length)throw new TypeError("end out of bounds");var n;if("number"==typeof e)for(n=t;n<r;n++)this[n]=e;else{var i=x(e.toString()),o=i.length;for(n=t;n<r;n++)this[n]=i[n%o]}return this}},c.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(c.TYPED_ARRAY_SUPPORT)return new c(this).buffer;for(var e=new Uint8Array(this.length),t=0,r=e.length;t<r;t+=1)e[t]=this[t];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var w=c.prototype;c._augment=function(e){return e.constructor=c,e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=w.get,e.set=w.set,e.write=w.write,e.toString=w.toString,e.toLocaleString=w.toString,e.toJSON=w.toJSON,e.equals=w.equals,e.compare=w.compare,e.copy=w.copy,e.slice=w.slice,e.readUInt8=w.readUInt8,e.readUInt16LE=w.readUInt16LE,e.readUInt16BE=w.readUInt16BE,e.readUInt32LE=w.readUInt32LE,e.readUInt32BE=w.readUInt32BE,e.readInt8=w.readInt8,e.readInt16LE=w.readInt16LE,e.readInt16BE=w.readInt16BE,e.readInt32LE=w.readInt32LE,e.readInt32BE=w.readInt32BE,e.readFloatLE=w.readFloatLE,e.readFloatBE=w.readFloatBE,e.readDoubleLE=w.readDoubleLE,e.readDoubleBE=w.readDoubleBE,e.writeUInt8=w.writeUInt8,e.writeUInt16LE=w.writeUInt16LE,e.writeUInt16BE=w.writeUInt16BE,e.writeUInt32LE=w.writeUInt32LE,e.writeUInt32BE=w.writeUInt32BE,e.writeInt8=w.writeInt8,e.writeInt16LE=w.writeInt16LE,e.writeInt16BE=w.writeInt16BE,e.writeInt32LE=w.writeInt32LE,e.writeInt32BE=w.writeInt32BE,e.writeFloatLE=w.writeFloatLE,e.writeFloatBE=w.writeFloatBE,e.writeDoubleLE=w.writeDoubleLE,e.writeDoubleBE=w.writeDoubleBE,e.fill=w.fill,e.inspect=w.inspect,e.toArrayBuffer=w.toArrayBuffer,e};var E=/[^+\/0-9A-z]/g;function A(e){return e<16?"0"+e.toString(16):e.toString(16)}function x(e){for(var t=[],r=0;r<e.length;r++){var n=e.charCodeAt(r);if(n<=127)t.push(n);else{var i=r;55296<=n&&n<=57343&&r++;for(var o=encodeURIComponent(e.slice(i,r+1)).substr(1).split("%"),a=0;a<o.length;a++)t.push(parseInt(o[a],16))}}return t}function T(e){return n.toByteArray(e)}function R(e,t,r,n,i){i&&(n-=n%i);for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);o++)t[o+r]=e[o];return o}function j(e){try{return decodeURIComponent(e)}catch(e){return String.fromCharCode(65533)}}},{"base64-js":3,ieee754:56,"is-array":59}],8:[function(e,t,r){"use strict";var o=e("./lib/thunk.js");function a(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}t.exports=function(e){var t=new a;t.pre=e.pre,t.body=e.body,t.post=e.post;var r=e.args.slice(0);t.argTypes=r;for(var n=0;n<r.length;++n){var i=r[n];if("array"===i||"object"==typeof i&&i.blockIndices){if(t.argTypes[n]="array",t.arrayArgs.push(n),t.arrayBlockIndices.push(i.blockIndices?i.blockIndices:0),t.shimArgs.push("array"+n),n<t.pre.args.length&&0<t.pre.args[n].count)throw new Error("cwise: pre() block may not reference array args");if(n<t.post.args.length&&0<t.post.args[n].count)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===i)t.scalarArgs.push(n),t.shimArgs.push("scalar"+n);else if("index"===i){if(t.indexArgs.push(n),n<t.pre.args.length&&0<t.pre.args[n].count)throw new Error("cwise: pre() block may not reference array index");if(n<t.body.args.length&&t.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array index");if(n<t.post.args.length&&0<t.post.args[n].count)throw new Error("cwise: post() block may not reference array index")}else if("shape"===i){if(t.shapeArgs.push(n),n<t.pre.args.length&&t.pre.args[n].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(n<t.body.args.length&&t.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array shape");if(n<t.post.args.length&&t.post.args[n].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof i||!i.offset)throw new Error("cwise: Unknown argument type "+r[n]);t.argTypes[n]="offset",t.offsetArgs.push({array:i.array,offset:i.offset}),t.offsetArgIndex.push(n)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,o(t)}},{"./lib/thunk.js":10}],9:[function(e,t,r){"use strict";var A=e("uniq");function x(e,t,r){var n,i,o=e.length,a=t.arrayArgs.length,s=0<t.indexArgs.length,u=[],l=[],c=0,f=0;for(n=0;n<o;++n)l.push(["i",n,"=0"].join(""));for(i=0;i<a;++i)for(n=0;n<o;++n)f=c,c=e[n],0===n?l.push(["d",i,"s",n,"=t",i,"p",c].join("")):l.push(["d",i,"s",n,"=(t",i,"p",c,"-s",f,"*t",i,"p",f,")"].join(""));for(u.push("var "+l.join(",")),n=o-1;0<=n;--n)c=e[n],u.push(["for(i",n,"=0;i",n,"<s",c,";++i",n,"){"].join(""));for(u.push(r),n=0;n<o;++n){for(f=c,c=e[n],i=0;i<a;++i)u.push(["p",i,"+=d",i,"s",n].join(""));s&&(0<n&&u.push(["index[",f,"]-=s",f].join("")),u.push(["++index[",c,"]"].join(""))),u.push("}")}return u.join("\n")}function T(e,t,r){for(var n=e.body,i=[],o=[],a=0;a<e.args.length;++a){var s=e.args[a];if(!(s.count<=0)){var u=new RegExp(s.name,"g"),l="",c=t.arrayArgs.indexOf(a);switch(t.argTypes[a]){case"offset":var f=t.offsetArgIndex.indexOf(a);c=t.offsetArgs[f].array,l="+q"+f;case"array":l="p"+c+l;var h="l"+a,p="a"+c;if(0===t.arrayBlockIndices[c])1===s.count?"generic"===r[c]?s.lvalue?(i.push(["var ",h,"=",p,".get(",l,")"].join("")),n=n.replace(u,h),o.push([p,".set(",l,",",h,")"].join(""))):n=n.replace(u,[p,".get(",l,")"].join("")):n=n.replace(u,[p,"[",l,"]"].join("")):"generic"===r[c]?(i.push(["var ",h,"=",p,".get(",l,")"].join("")),n=n.replace(u,h),s.lvalue&&o.push([p,".set(",l,",",h,")"].join(""))):(i.push(["var ",h,"=",p,"[",l,"]"].join("")),n=n.replace(u,h),s.lvalue&&o.push([p,"[",l,"]=",h].join("")));else{for(var d=[s.name],g=[l],m=0;m<Math.abs(t.arrayBlockIndices[c]);m++)d.push("\\s*\\[([^\\]]+)\\]"),g.push("$"+(m+1)+"*t"+c+"b"+m);if(u=new RegExp(d.join(""),"g"),l=g.join("+"),"generic"===r[c])throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(u,[p,"[",l,"]"].join(""))}break;case"scalar":n=n.replace(u,"Y"+t.scalarArgs.indexOf(a));break;case"index":n=n.replace(u,"index");break;case"shape":n=n.replace(u,"shape")}}}return[i.join("\n"),n,o.join("\n")].join("\n").trim()}t.exports=function(e,t){for(var r=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,n=new Array(e.arrayArgs.length),i=new Array(e.arrayArgs.length),o=0;o<e.arrayArgs.length;++o)i[o]=t[2*o],n[o]=t[2*o+1];var a=[],s=[],u=[],l=[],c=[];for(o=0;o<e.arrayArgs.length;++o){e.arrayBlockIndices[o]<0?(u.push(0),l.push(r),a.push(r),s.push(r+e.arrayBlockIndices[o])):(u.push(e.arrayBlockIndices[o]),l.push(e.arrayBlockIndices[o]+r),a.push(0),s.push(e.arrayBlockIndices[o]));for(var f=[],h=0;h<n[o].length;h++)u[o]<=n[o][h]&&n[o][h]<l[o]&&f.push(n[o][h]-u[o]);c.push(f)}var p=["SS"],d=["'use strict'"],g=[];for(h=0;h<r;++h)g.push(["s",h,"=SS[",h,"]"].join(""));for(o=0;o<e.arrayArgs.length;++o){for(p.push("a"+o),p.push("t"+o),p.push("p"+o),h=0;h<r;++h)g.push(["t",o,"p",h,"=t",o,"[",u[o]+h,"]"].join(""));for(h=0;h<Math.abs(e.arrayBlockIndices[o]);++h)g.push(["t",o,"b",h,"=t",o,"[",a[o]+h,"]"].join(""))}for(o=0;o<e.scalarArgs.length;++o)p.push("Y"+o);if(0<e.shapeArgs.length&&g.push("shape=SS.slice(0)"),0<e.indexArgs.length){var m=new Array(r);for(o=0;o<r;++o)m[o]="0";g.push(["index=[",m.join(","),"]"].join(""))}for(o=0;o<e.offsetArgs.length;++o){var y=e.offsetArgs[o],v=[];for(h=0;h<y.offset.length;++h)0!==y.offset[h]&&(1===y.offset[h]?v.push(["t",y.array,"p",h].join("")):v.push([y.offset[h],"*t",y.array,"p",h].join("")));0===v.length?g.push("q"+o+"=0"):g.push(["q",o,"=",v.join("+")].join(""))}var _=A([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));for(g=g.concat(_),d.push("var "+g.join(",")),o=0;o<e.arrayArgs.length;++o)d.push("p"+o+"|=0");3<e.pre.body.length&&d.push(T(e.pre,e,i));var b=T(e.body,e,i),w=function(e){for(var t=0,r=e[0].length;t<r;){for(var n=1;n<e.length;++n)if(e[n][t]!==e[0][t])return t;++t}return t}(c);w<r?d.push(function(e,t,r,n){for(var i=t.length,o=r.arrayArgs.length,a=r.blockSize,s=0<r.indexArgs.length,u=[],l=0;l<o;++l)u.push(["var offset",l,"=p",l].join(""));for(l=e;l<i;++l)u.push(["for(var j"+l+"=SS[",t[l],"]|0;j",l,">0;){"].join("")),u.push(["if(j",l,"<",a,"){"].join("")),u.push(["s",t[l],"=j",l].join("")),u.push(["j",l,"=0"].join("")),u.push(["}else{s",t[l],"=",a].join("")),u.push(["j",l,"-=",a,"}"].join("")),s&&u.push(["index[",t[l],"]=j",l].join(""));for(l=0;l<o;++l){for(var c=["offset"+l],f=e;f<i;++f)c.push(["j",f,"*t",l,"p",t[f]].join(""));u.push(["p",l,"=(",c.join("+"),")"].join(""))}for(u.push(x(t,r,n)),l=e;l<i;++l)u.push("}");return u.join("\n")}(w,c[0],e,b)):d.push(x(c[0],e,b)),3<e.post.body.length&&d.push(T(e.post,e,i)),e.debug&&console.log("-----Generated cwise routine for ",t,":\n"+d.join("\n")+"\n----------");var E=[e.funcName||"unnamed","_cwise_loop_",n[0].join("s"),"m",w,function(e){for(var t=new Array(e.length),r=!0,n=0;n<e.length;++n){var i=e[n],o=i.match(/\d+/);o=o?o[0]:"",0===i.charAt(0)?t[n]="u"+i.charAt(1)+o:t[n]=i.charAt(0)+o,0<n&&(r=r&&t[n]===t[n-1])}return r?t[0]:t.join("")}(i)].join("");return new Function(["function ",E,"(",p.join(","),"){",d.join("\n"),"} return ",E].join(""))()}},{uniq:65}],10:[function(e,t,r){"use strict";var f=e("./compile.js");t.exports=function(e){var t=["'use strict'","var CACHED={}"],r=[],n=e.funcName+"_cwise_thunk";t.push(["return function ",n,"(",e.shimArgs.join(","),"){"].join(""));for(var i=[],o=[],a=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")],s=[],u=[],l=0;l<e.arrayArgs.length;++l){var c=e.arrayArgs[l];r.push(["t",c,"=array",c,".dtype,","r",c,"=array",c,".order"].join("")),i.push("t"+c),i.push("r"+c),o.push("t"+c),o.push("r"+c+".join()"),a.push("array"+c+".data"),a.push("array"+c+".stride"),a.push("array"+c+".offset|0"),0<l&&(s.push("array"+e.arrayArgs[0]+".shape.length===array"+c+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[l]))),u.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+c+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[l])+"]"))}for(1<e.arrayArgs.length&&(t.push("if (!("+s.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),t.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}")),l=0;l<e.scalarArgs.length;++l)a.push("scalar"+e.scalarArgs[l]);return r.push(["type=[",o.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),t.push("var "+r.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",i.join(","),"])}","return proc(",a.join(","),")}"].join("")),e.debug&&console.log("-----Generated thunk:\n"+t.join("\n")+"\n----------"),new Function("compile",t.join("\n"))(f.bind(void 0,e))}},{"./compile.js":9}],11:[function(e,r,t){!function(e,t){void 0!==r?r.exports=t():"function"==typeof define&&"object"==typeof define.amd?define(t):this.domready=t()}(0,function(){var e,t=[],r=document,n=r.documentElement.doScroll,i="DOMContentLoaded",o=(n?/^loaded|^c/:/^loaded|^i|^c/).test(r.readyState);return o||r.addEventListener(i,e=function(){for(r.removeEventListener(i,e),o=1;e=t.shift();)e()}),function(e){o?setTimeout(e,0):t.push(e)}})},{}],12:[function(e,t,r){"use strict";t.exports=function(e,t){switch(void 0===t&&(t=0),typeof e){case"number":if(0<e)return function(e,t){var r,n;for(r=new Array(e),n=0;n<e;++n)r[n]=t;return r}(0|e,t);break;case"object":if("number"==typeof e.length)return function e(t,r,n){var i=0|t[n];if(i<=0)return[];var o,a=new Array(i);if(n===t.length-1)for(o=0;o<i;++o)a[o]=r;else for(o=0;o<i;++o)a[o]=e(t,r,n+1);return a}(e,t,0)}return[]}},{}],13:[function(e,t,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function s(e){return"function"==typeof e}function u(e){return"object"==typeof e&&null!==e}function l(e){return void 0===e}((t.exports=n).EventEmitter=n).prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,r,n,i,o,a;if(this._events||(this._events={}),"error"===e&&(!this._events.error||u(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(l(r=this._events[e]))return!1;if(s(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(n=arguments.length,i=new Array(n-1),o=1;o<n;o++)i[o-1]=arguments[o];r.apply(this,i)}else if(u(r)){for(n=arguments.length,i=new Array(n-1),o=1;o<n;o++)i[o-1]=arguments[o];for(n=(a=r.slice()).length,o=0;o<n;o++)a[o].apply(this,i)}return!0},n.prototype.on=n.prototype.addListener=function(e,t){var r;if(!s(t))throw TypeError("listener must be a function");(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,s(t.listener)?t.listener:t),this._events[e]?u(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,u(this._events[e])&&!this._events[e].warned)&&((r=l(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&0<r&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()));return this},n.prototype.once=function(e,t){if(!s(t))throw TypeError("listener must be a function");var r=!1;function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var r,n,i,o;if(!s(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=(r=this._events[e]).length,n=-1,r===t||s(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(u(r)){for(o=i;0<o--;)if(r[o]===t||r[o].listener&&r[o].listener===t){n=o;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(s(r=this._events[e]))this.removeListener(e,r);else for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?s(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,t){return e._events&&e._events[t]?s(e._events[t])?1:e._events[t].length:0}},{}],14:[function(e,t,r){"object"==typeof window.performance?window.performance.now?t.exports=function(){return window.performance.now()}:window.performance.webkitNow&&(t.exports=function(){return window.performance.webkitNow()}):Date.now?t.exports=Date.now:t.exports=function(){return(new Date).getTime()}},{}],15:[function(e,t,r){var i,o,a="";function n(e,t,r,n){e[i](a+t,"wheel"==o?r:function(e){!e&&(e=window.event);var t={originalEvent:e,target:e.target||e.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==e.type?0:1,deltaX:0,delatZ:0,preventDefault:function(){e.preventDefault?e.preventDefault():e.returnValue=!1}};return"mousewheel"==o?(t.deltaY=-.025*e.wheelDelta,e.wheelDeltaX&&(t.deltaX=-.025*e.wheelDeltaX)):t.deltaY=e.detail,r(t)},n||!1)}window.addEventListener?i="addEventListener":(i="attachEvent",a="on"),o="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",t.exports=function(e,t,r){n(e,o,t,r),"DOMMouseScroll"==o&&n(e,"MozMousePixelScroll",t,r)}},{}],16:[function(e,t,r){for(var o=0,n=["ms","moz","webkit","o"],i=0;i<n.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[n[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[i]+"CancelAnimationFrame"]||window[n[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,t){var r=(new Date).getTime(),n=Math.max(0,16-(r-o)),i=window.setTimeout(function(){e(r+n)},n);return o=r+n,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})},{}],17:[function(e,t,r){"use strict";var n=e("events").EventEmitter,i=e("util"),o=e("domready"),a=e("vkey"),s=e("invert-hash"),u=e("uniq"),l=e("binary-search-bounds"),c=e("iota-array"),f=Math.min;e("./lib/raf-polyfill.js");var h=e("./lib/mousewheel-polyfill.js"),p=e("./lib/hrtime-polyfill.js"),d=function(){var e,t,r=new Array(256);for(e=0;e<256;++e)r[e]="UNK";for(e in a)"<"===(t=a[e]).charAt(0)&&">"===t.charAt(t.length-1)&&(t=t.substring(1,t.length-1)),t=t.replace(/\s/g,"-"),r[parseInt(e)]=t;return r}(),g=u(Object.keys(s(d)));function m(e){return l.eq(g,e)}function y(e){return m(d[e])}function v(){n.call(this),this._curKeyState=new Array(g.length),this._pressCount=new Array(g.length),this._releaseCount=new Array(g.length),this._tickInterval=null,this._rafHandle=null,this._tickRate=0,this._lastTick=p(),this._frameTime=0,this._paused=!0,this._width=0,this._height=0,this._wantFullscreen=!1,this._wantPointerLock=!1,this._fullscreenActive=!1,this._pointerLockActive=!1,this._render=function(e){var t;e._rafHandle=requestAnimationFrame(e._render),T(e),t=e._paused?e._frameTime:f(1,(p()-e._lastTick)/e._tickRate);++e.frameCount;var r=p();e.emit("render",t);var n=p();e.frameTime=n-r}.bind(void 0,this),this.preventDefaults=!0,this.stopPropagation=!1;for(var e=0;e<g.length;++e)this._curKeyState[e]=!1,this._pressCount[e]=this._releaseCount[e]=0;this.element=null,this.bindings={},this.frameSkip=100,this.tickCount=0,this.frameCount=0,this.startTime=p(),this.tickTime=this._tickRate,this.frameTime=10,this.stickyFullscreen=!1,this.stickyPointerLock=!1,this.scroll=[0,0,0],this.mouseX=0,this.mouseY=0,this.prevMouseX=0,this.prevMouseY=0}i.inherits(v,n);var _=v.prototype;function b(e,t,r){if(r in t){for(var n=t[r],i=0,o=0,a=n.length;o<a;++o)i+=e[m(n[o])];return i}var s=m(r);return 0<=s?e[s]:0}function w(e){var t=e.element;e._wantFullscreen&&!e._fullscreenActive&&(t.requestFullscreen||t.requestFullScreen||t.webkitRequestFullscreen||t.webkitRequestFullScreen||t.mozRequestFullscreen||t.mozRequestFullScreen||function(){}).call(t);e._wantPointerLock&&!e._pointerLockActive&&(t.requestPointerLock||t.webkitRequestPointerLock||t.mozRequestPointerLock||t.msRequestPointerLock||t.oRequestPointerLock||function(){}).call(t)}_.keyNames=g,_.bind=function(e){var t,r;t=e in this.bindings?this.bindings[e]:[];for(var n=1,i=arguments.length;n<i;++n)if(0<=m(r=arguments[n]))t.push(r);else if(r in this.bindings)for(var o=this.bindings[r],a=0;a<o.length;++a)t.push(o[a]);0<(t=u(t)).length&&(this.bindings[e]=t),this.emit("bind",e,t)},_.unbind=function(e){e in this.bindings&&delete this.bindings[e],this.emit("unbind",e)},_.down=function(e){return function(e,t,r){if(r in t){for(var n=t[r],i=0,o=n.length;i<o;++i)if(e[m(n[i])])return!0;return!1}var a=m(r);return 0<=a&&e[a]}(this._curKeyState,this.bindings,e)},_.wasDown=function(e){return this.down(e)||!!this.press(e)},_.up=function(e){return!this.down(e)},_.wasUp=function(e){return this.up(e)||!!this.release(e)},_.press=function(e){return b(this._pressCount,this.bindings,e)},_.release=function(e){return b(this._releaseCount,this.bindings,e)},Object.defineProperty(_,"paused",{get:function(){return this._paused},set:function(e){!!e!==this._paused&&(this._paused?(this._paused=!1,this._lastTick=p()-Math.floor(this._frameTime*this._tickRate),this._tickInterval=setInterval(T,this._tickRate,this),this._rafHandle=requestAnimationFrame(this._render)):(this._paused=!0,this._frameTime=f(1,(p()-this._lastTick)/this._tickRate),clearInterval(this._tickInterval)))}});var E=document.exitFullscreen||document.cancelFullscreen||document.cancelFullScreen||document.webkitCancelFullscreen||document.webkitCancelFullScreen||document.mozCancelFullscreen||document.mozCancelFullScreen||function(){};Object.defineProperty(_,"fullscreen",{get:function(){return this._fullscreenActive},set:function(e){return!!e?(this._wantFullscreen=!0,w(this)):(this._wantFullscreen=!1,E.call(document)),this._fullscreenActive}});var A=document.exitPointerLock||document.webkitExitPointerLock||document.mozExitPointerLock||function(){};function x(e,t,r){e._curKeyState[t]!==r&&(r?e._pressCount[t]++:e._releaseCount[t]++,e._curKeyState[t]=r)}function T(e){for(var t,r,n,i=p()+e.frameSkip,o=e._pressCount,a=e._releaseCount,s=e._tickRate,u=g.length;!e._paused&&p()>=e._lastTick+s;){if(p()>i)return void(e._lastTick=p()+s);for(r=p(),e.emit("tick"),n=p(),e.tickTime=n-r,++e.tickCount,e._lastTick+=s,t=0;t<u;++t)o[t]=a[t]=0;e._pointerLockActive?(e.prevMouseX=e.mouseX=e.width>>1,e.prevMouseY=e.mouseY=e.height>>1):(e.prevMouseX=e.mouseX,e.prevMouseY=e.mouseY),e.scroll[0]=e.scroll[1]=e.scroll[2]=0}}function R(e,t){e.preventDefaults&&t.preventDefault(),e.stopPropagation&&t.stopPropagation()}function j(e,t){var r;if(r=e,document.activeElement===document.body||document.activeElement===r.element)if(R(e,t),t.metaKey)L(e,t);else{var n=y(t.keyCode||t.char||t.which||t.charCode);0<=n&&x(e,n,!0)}}Object.defineProperty(_,"pointerLock",{get:function(){return this._pointerLockActive},set:function(e){return!!e?(this._wantPointerLock=!0,w(this)):(this._wantPointerLock=!1,A.call(document)),this._pointerLockActive}}),Object.defineProperty(_,"width",{get:function(){return this.element.clientWidth}}),Object.defineProperty(_,"height",{get:function(){return this.element.clientHeight}});var S=c(32).map(function(e){return m("mouse-"+(e+1))});function I(e,t){return R(e,t),function(e,t){for(var r=0;r<32;++r)x(e,S[r],!!(t&1<<r))}(e,0),!1}function L(e,t){var r,n=g.length,i=e._curKeyState,o=e._releaseCount;for(r=0;r<n;++r)i[r]&&++o[r],i[r]=!1;return!1}function N(){var e=document.createElement("div");return e.tabindex=1,e.style.position="absolute",e.style.left="0px",e.style.right="0px",e.style.top="0px",e.style.bottom="0px",e.style.height="100%",e.style.overflow="hidden",document.body.appendChild(e),document.body.style.overflow="hidden",document.body.style.height="100%",e}t.exports=function(s){var u=!!(s=s||{}).fullscreen,l=u;void 0!==typeof s.pointerLock&&(l=!!s.pointerLock);var c=new v;return c._tickRate=s.tickRate||30,c.frameSkip=s.frameSkip||5*(c._tickRate+5),c.stickyFullscreen=!!s.stickyFullscreen||!!s.sticky,c.stickyPointerLock=!!s.stickyPointerLock||!!s.sticky,s.bindings&&(c.bindings=s.bindings),setTimeout(function(){o(function(){var e=s.element;if("string"==typeof e){var t=document.querySelector(e);t||(t=document.getElementById(e)),t||(t=document.getElementByClass(e)[0]),t||(t=N()),c.element=t}else c.element="object"==typeof e&&e?e:"function"==typeof e?e():N();c.element.style&&(c.element.style["-webkit-touch-callout"]="none",c.element.style["-webkit-user-select"]="none",c.element.style["-khtml-user-select"]="none",c.element.style["-moz-user-select"]="none",c.element.style["-ms-user-select"]="none",c.element.style["user-select"]="none"),c._width=c.element.clientWidth,c._height=c.element.clientHeight;var r=function(e,t){var r=0|e.element.clientWidth,n=0|e.element.clientHeight;r===e._width&&n===e._height||(e._width=r,e._height=n,e.emit("resize",r,n))}.bind(void 0,c);"undefined"!=typeof MutationObserver?new MutationObserver(r).observe(c.element,{attributes:!0,subtree:!0}):c.element.addEventListener("DOMSubtreeModified",r,!1),window.addEventListener("resize",r,!1),window.addEventListener("keydown",j.bind(void 0,c),!1),window.addEventListener("keyup",function(e,t){R(e,t);var r=y(t.keyCode||t.char||t.which||t.charCode);0<=r&&x(e,r,!1)}.bind(void 0,c),!1),c.element.oncontextmenu=function(e,t){return R(e,t),!1}.bind(void 0,c),c.element.addEventListener("mousedown",function(e,t){return R(e,t),x(e,S[t.button],!0),!1}.bind(void 0,c),!1),c.element.addEventListener("mouseup",function(e,t){return R(e,t),x(e,S[t.button],!1),!1}.bind(void 0,c),!1),c.element.addEventListener("mousemove",function(e,t){if(R(e,t),e._pointerLockActive){var r=t.movementX||t.mozMovementX||t.webkitMovementX||0,n=t.movementY||t.mozMovementY||t.webkitMovementY||0;e.mouseX+=r,e.mouseY+=n}else e.mouseX=t.clientX-e.element.offsetLeft,e.mouseY=t.clientY-e.element.offsetTop;return!1}.bind(void 0,c),!1),c.element.addEventListener("mouseenter",function(e,t){return R(e,t),e._pointerLockActive?(e.prevMouseX=e.mouseX=e.width>>1,e.prevMouseY=e.mouseY=e.height>>1):(e.prevMouseX=e.mouseX=t.clientX-e.element.offsetLeft,e.prevMouseY=e.mouseY=t.clientY-e.element.offsetTop),!1}.bind(void 0,c),!1);var n=I.bind(void 0,c);c.element.addEventListener("mouseleave",n,!1),c.element.addEventListener("mouseout",n,!1),window.addEventListener("mouseleave",n,!1),window.addEventListener("mouseout",n,!1);var i=L.bind(void 0,c);c.element.addEventListener("blur",i,!1),c.element.addEventListener("focusout",i,!1),c.element.addEventListener("focus",i,!1),window.addEventListener("blur",i,!1),window.addEventListener("focusout",i,!1),window.addEventListener("focus",i,!1),h(c.element,function(e,t){R(e,t);var r=1;switch(t.deltaMode){case 0:r=1;break;case 1:r=12;break;case 2:r=e.height}return e.scroll[0]+=t.deltaX*r,e.scroll[1]+=t.deltaY*r,e.scroll[2]+=t.deltaZ*r||0,!1}.bind(void 0,c),!1);var o=function(e){e._fullscreenActive=document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||!1,!e.stickyFullscreen&&e._fullscreenActive&&(e._wantFullscreen=!1)}.bind(void 0,c);document.addEventListener("fullscreenchange",o,!1),document.addEventListener("mozfullscreenchange",o,!1),document.addEventListener("webkitfullscreenchange",o,!1),c.element.addEventListener("click",w.bind(void 0,c),!1);var a=function(e,t){e._pointerLockActive=e.element===(document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement||null),!e.stickyPointerLock&&e._pointerLockActive&&(e._wantPointerLock=!1)}.bind(void 0,c);document.addEventListener("pointerlockchange",a,!1),document.addEventListener("mozpointerlockchange",a,!1),document.addEventListener("webkitpointerlockchange",a,!1),document.addEventListener("pointerlocklost",a,!1),document.addEventListener("webkitpointerlocklost",a,!1),document.addEventListener("mozpointerlocklost",a,!1),c.fullscreen=u,c.pointerLock=l,c.bind("mouse-left","mouse-1"),c.bind("mouse-right","mouse-3"),c.bind("mouse-middle","mouse-2"),c._lastTick=p(),c.startTime=p(),c.paused=!1,c.emit("init")})},0),c}},{"./lib/hrtime-polyfill.js":14,"./lib/mousewheel-polyfill.js":15,"./lib/raf-polyfill.js":16,"binary-search-bounds":4,domready:11,events:13,"invert-hash":57,"iota-array":58,uniq:65,util:68,vkey:69}],18:[function(e,t,r){"use strict";var a=e("typedarray-pool"),s=e("ndarray-ops"),u=e("ndarray"),l=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function o(e,t,r,n,i){this.gl=e,this.type=t,this.handle=r,this.length=n,this.usage=i}var n=o.prototype;function c(e,t,r,n,i,o){var a=i.length*i.BYTES_PER_ELEMENT;if(o<0)return e.bufferData(t,i,n),a;if(r<a+o)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return e.bufferSubData(t,o,i),r}function f(e,t){for(var r=a.malloc(e.length,t),n=e.length,i=0;i<n;++i)r[i]=e[i];return r}n.bind=function(){this.gl.bindBuffer(this.type,this.handle)},n.unbind=function(){this.gl.bindBuffer(this.type,null)},n.dispose=function(){this.gl.deleteBuffer(this.handle)},n.update=function(e,t){if("number"!=typeof t&&(t=-1),this.bind(),"object"==typeof e&&void 0!==e.shape){var r=e.dtype;if(l.indexOf(r)<0&&(r="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER)r=gl.getExtension("OES_element_index_uint")&&"uint16"!==r?"uint32":"uint16";if(r===e.dtype&&function(e,t){for(var r=1,n=t.length-1;0<=n;--n){if(t[n]!==r)return!1;r*=e[n]}return!0}(e.shape,e.stride))0===e.offset&&e.data.length===e.shape[0]?this.length=c(this.gl,this.type,this.length,this.usage,e.data,t):this.length=c(this.gl,this.type,this.length,this.usage,e.data.subarray(e.offset,e.shape[0]),t);else{var n=a.malloc(e.size,r),i=u(n,e.shape);s.assign(i,e),this.length=c(this.gl,this.type,this.length,this.usage,t<0?n:n.subarray(0,e.size),t),a.free(n)}}else if(Array.isArray(e)){var o;o=this.type===this.gl.ELEMENT_ARRAY_BUFFER?f(e,"uint16"):f(e,"float32"),this.length=c(this.gl,this.type,this.length,this.usage,t<0?o:o.subarray(0,e.length),t),a.free(o)}else if("object"==typeof e&&"number"==typeof e.length)this.length=c(this.gl,this.type,this.length,this.usage,e,t);else{if("number"!=typeof e&&void 0!==e)throw new Error("gl-buffer: Invalid data type");if(0<=t)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(e|=0)<=0&&(e=1),this.gl.bufferData(this.type,0|e,this.usage),this.length=e}},t.exports=function(e,t,r,n){if(r=r||e.ARRAY_BUFFER,n=n||e.DYNAMIC_DRAW,r!==e.ARRAY_BUFFER&&r!==e.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(n!==e.DYNAMIC_DRAW&&n!==e.STATIC_DRAW&&n!==e.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var i=new o(e,r,e.createBuffer(),0,n);return i.update(t),i}},{ndarray:62,"ndarray-ops":61,"typedarray-pool":64}],19:[function(e,t,r){"use strict";var s=e("gl-texture2d");t.exports=function(e,t,r,n){f||(f=e.FRAMEBUFFER_UNSUPPORTED,h=e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,p=e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,d=e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var i=e.getExtension("WEBGL_draw_buffers");!g&&i&&function(e,t){var r=e.getParameter(t.MAX_COLOR_ATTACHMENTS_WEBGL);g=new Array(r+1);for(var n=0;n<=r;++n){for(var i=new Array(r),o=0;o<n;++o)i[o]=e.COLOR_ATTACHMENT0+o;for(var o=n;o<r;++o)i[o]=e.NONE;g[n]=i}}(e,i);Array.isArray(t)&&(n=r,r=0|t[1],t=0|t[0]);if("number"!=typeof t)throw new Error("gl-fbo: Missing shape parameter");var o=e.getParameter(e.MAX_RENDERBUFFER_SIZE);if(t<0||o<t||r<0||o<r)throw new Error("gl-fbo: Parameters are too large for FBO");var a=1;if("color"in(n=n||{})){if((a=Math.max(0|n.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(1<a){if(!i)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(a>e.getParameter(i.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+a+" draw buffers")}}var s=e.UNSIGNED_BYTE,u=e.getExtension("OES_texture_float");if(n.float&&0<a){if(!u)throw new Error("gl-fbo: Context does not support floating point textures");s=e.FLOAT}else n.preferFloat&&0<a&&u&&(s=e.FLOAT);var l=!0;"depth"in n&&(l=!!n.depth);var c=!1;"stencil"in n&&(c=!!n.stencil);return new w(e,t,r,s,a,l,c,i)};var f,h,p,d,g=null;function m(e){return[e.getParameter(e.FRAMEBUFFER_BINDING),e.getParameter(e.RENDERBUFFER_BINDING),e.getParameter(e.TEXTURE_BINDING_2D)]}function y(e,t){e.bindFramebuffer(e.FRAMEBUFFER,t[0]),e.bindRenderbuffer(e.RENDERBUFFER,t[1]),e.bindTexture(e.TEXTURE_2D,t[2])}function v(e){switch(e){case f:throw new Error("gl-fbo: Framebuffer unsupported");case h:throw new Error("gl-fbo: Framebuffer incomplete attachment");case p:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case d:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function _(e,t,r,n,i,o){if(!n)return null;var a=s(e,t,r,i,n);return a.magFilter=e.NEAREST,a.minFilter=e.NEAREST,a.mipSamples=1,a.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,o,e.TEXTURE_2D,a.handle,0),a}function b(e,t,r,n,i){var o=e.createRenderbuffer();return e.bindRenderbuffer(e.RENDERBUFFER,o),e.renderbufferStorage(e.RENDERBUFFER,n,t,r),e.framebufferRenderbuffer(e.FRAMEBUFFER,i,e.RENDERBUFFER,o),o}function w(e,t,r,n,i,o,a,s){this.gl=e,this._shape=[0|t,0|r],this._destroyed=!1,this._ext=s,this.color=new Array(i);for(var u=0;u<i;++u)this.color[u]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=n,this._useDepth=o,this._useStencil=a;var l=this,c=[0|t,0|r];Object.defineProperties(c,{0:{get:function(){return l._shape[0]},set:function(e){return l.width=e}},1:{get:function(){return l._shape[1]},set:function(e){return l.height=e}}}),this._shapeVector=c,function(e){var t=m(e.gl),r=e.gl,n=e.handle=r.createFramebuffer(),i=e._shape[0],o=e._shape[1],a=e.color.length,s=e._ext,u=e._useStencil,l=e._useDepth,c=e._colorType;r.bindFramebuffer(r.FRAMEBUFFER,n);for(var f=0;f<a;++f)e.color[f]=_(r,i,o,c,r.RGBA,r.COLOR_ATTACHMENT0+f);0===a?(e._color_rb=b(r,i,o,r.RGBA4,r.COLOR_ATTACHMENT0),s&&s.drawBuffersWEBGL(g[0])):1<a&&s.drawBuffersWEBGL(g[a]);var h=r.getExtension("WEBGL_depth_texture");h?u?e.depth=_(r,i,o,h.UNSIGNED_INT_24_8_WEBGL,r.DEPTH_STENCIL,r.DEPTH_STENCIL_ATTACHMENT):l&&(e.depth=_(r,i,o,r.UNSIGNED_SHORT,r.DEPTH_COMPONENT,r.DEPTH_ATTACHMENT)):l&&u?e._depth_rb=b(r,i,o,r.DEPTH_STENCIL,r.DEPTH_STENCIL_ATTACHMENT):l?e._depth_rb=b(r,i,o,r.DEPTH_COMPONENT16,r.DEPTH_ATTACHMENT):u&&(e._depth_rb=b(r,i,o,r.STENCIL_INDEX,r.STENCIL_ATTACHMENT));var p=r.checkFramebufferStatus(r.FRAMEBUFFER);if(p!==r.FRAMEBUFFER_COMPLETE){for(e._destroyed=!0,r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteFramebuffer(e.handle),e.handle=null,e.depth&&(e.depth.dispose(),e.depth=null),e._depth_rb&&(r.deleteRenderbuffer(e._depth_rb),e._depth_rb=null),f=0;f<e.color.length;++f)e.color[f].dispose(),e.color[f]=null;e._color_rb&&(r.deleteRenderbuffer(e._color_rb),e._color_rb=null),y(r,t),v(p)}y(r,t)}(this)}var n=w.prototype;function i(e,t,r){if(e._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(e._shape[0]!==t||e._shape[1]!==r){var n=e.gl,i=n.getParameter(n.MAX_RENDERBUFFER_SIZE);if(t<0||i<t||r<0||i<r)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");e._shape[0]=t,e._shape[1]=r;for(var o=m(n),a=0;a<e.color.length;++a)e.color[a].shape=e._shape;e._color_rb&&(n.bindRenderbuffer(n.RENDERBUFFER,e._color_rb),n.renderbufferStorage(n.RENDERBUFFER,n.RGBA4,e._shape[0],e._shape[1])),e.depth&&(e.depth.shape=e._shape),e._depth_rb&&(n.bindRenderbuffer(n.RENDERBUFFER,e._depth_rb),e._useDepth&&e._useStencil?n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e._shape[0],e._shape[1]):e._useDepth?n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,e._shape[0],e._shape[1]):e._useStencil&&n.renderbufferStorage(n.RENDERBUFFER,n.STENCIL_INDEX,e._shape[0],e._shape[1])),n.bindFramebuffer(n.FRAMEBUFFER,e.handle);var s=n.checkFramebufferStatus(n.FRAMEBUFFER);s!==n.FRAMEBUFFER_COMPLETE&&(e.dispose(),y(n,o),v(s)),y(n,o)}}Object.defineProperties(n,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(e){if(Array.isArray(e)||(e=[0|e,0|e]),2!==e.length)throw new Error("gl-fbo: Shape vector must be length 2");var t=0|e[0],r=0|e[1];return i(this,t,r),[t,r]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(e){return i(this,e|=0,this._shape[1]),e},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(e){return e|=0,i(this,this._shape[0],e),e},enumerable:!1}}),n.bind=function(){if(!this._destroyed){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.handle),e.viewport(0,0,this._shape[0],this._shape[1])}},n.dispose=function(){if(!this._destroyed){this._destroyed=!0;var e=this.gl;e.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(e.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var t=0;t<this.color.length;++t)this.color[t].dispose(),this.color[t]=null;this._color_rb&&(e.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":49}],20:[function(e,t,r){t.exports=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],f=t[9],h=t[10],p=t[11],d=t[12],g=t[13],m=t[14],y=t[15];return e[0]=s*(h*y-p*m)-f*(u*y-l*m)+g*(u*p-l*h),e[1]=-(n*(h*y-p*m)-f*(i*y-o*m)+g*(i*p-o*h)),e[2]=n*(u*y-l*m)-s*(i*y-o*m)+g*(i*l-o*u),e[3]=-(n*(u*p-l*h)-s*(i*p-o*h)+f*(i*l-o*u)),e[4]=-(a*(h*y-p*m)-c*(u*y-l*m)+d*(u*p-l*h)),e[5]=r*(h*y-p*m)-c*(i*y-o*m)+d*(i*p-o*h),e[6]=-(r*(u*y-l*m)-a*(i*y-o*m)+d*(i*l-o*u)),e[7]=r*(u*p-l*h)-a*(i*p-o*h)+c*(i*l-o*u),e[8]=a*(f*y-p*g)-c*(s*y-l*g)+d*(s*p-l*f),e[9]=-(r*(f*y-p*g)-c*(n*y-o*g)+d*(n*p-o*f)),e[10]=r*(s*y-l*g)-a*(n*y-o*g)+d*(n*l-o*s),e[11]=-(r*(s*p-l*f)-a*(n*p-o*f)+c*(n*l-o*s)),e[12]=-(a*(f*m-h*g)-c*(s*m-u*g)+d*(s*h-u*f)),e[13]=r*(f*m-h*g)-c*(n*m-i*g)+d*(n*h-i*f),e[14]=-(r*(s*m-u*g)-a*(n*m-i*g)+d*(n*u-i*s)),e[15]=r*(s*h-u*f)-a*(n*h-i*f)+c*(n*u-i*s),e}},{}],21:[function(e,t,r){t.exports=function(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},{}],22:[function(e,t,r){t.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},{}],23:[function(e,t,r){t.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],24:[function(e,t,r){t.exports=function(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],f=e[10],h=e[11],p=e[12],d=e[13],g=e[14],m=e[15];return(t*a-r*o)*(f*m-h*g)-(t*s-n*o)*(c*m-h*d)+(t*u-i*o)*(c*g-f*d)+(r*s-n*a)*(l*m-h*p)-(r*u-i*a)*(l*g-f*p)+(n*u-i*s)*(l*d-c*p)}},{}],25:[function(e,t,r){t.exports=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r+r,s=n+n,u=i+i,l=r*a,c=n*a,f=n*s,h=i*a,p=i*s,d=i*u,g=o*a,m=o*s,y=o*u;return e[0]=1-f-d,e[1]=c+y,e[2]=h-m,e[3]=0,e[4]=c-y,e[5]=1-l-d,e[6]=p+g,e[7]=0,e[8]=h+m,e[9]=p-g,e[10]=1-l-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],26:[function(e,t,r){t.exports=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=n+n,u=i+i,l=o+o,c=n*s,f=n*u,h=n*l,p=i*u,d=i*l,g=o*l,m=a*s,y=a*u,v=a*l;return e[0]=1-(p+g),e[1]=f+v,e[2]=h-y,e[3]=0,e[4]=f-v,e[5]=1-(c+g),e[6]=d+m,e[7]=0,e[8]=h+y,e[9]=d-m,e[10]=1-(c+p),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}},{}],27:[function(e,t,r){t.exports=function(e,t,r,n,i,o,a){var s=1/(r-t),u=1/(i-n),l=1/(o-a);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*u,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(i+n)*u,e[10]=(a+o)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*l,e[15]=0,e}},{}],28:[function(e,t,r){t.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],29:[function(e,t,r){t.exports={create:e("./create"),clone:e("./clone"),copy:e("./copy"),identity:e("./identity"),transpose:e("./transpose"),invert:e("./invert"),adjoint:e("./adjoint"),determinant:e("./determinant"),multiply:e("./multiply"),translate:e("./translate"),scale:e("./scale"),rotate:e("./rotate"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),fromRotationTranslation:e("./fromRotationTranslation"),fromQuat:e("./fromQuat"),frustum:e("./frustum"),perspective:e("./perspective"),perspectiveFromFieldOfView:e("./perspectiveFromFieldOfView"),ortho:e("./ortho"),lookAt:e("./lookAt"),str:e("./str")}},{"./adjoint":20,"./clone":21,"./copy":22,"./create":23,"./determinant":24,"./fromQuat":25,"./fromRotationTranslation":26,"./frustum":27,"./identity":28,"./invert":30,"./lookAt":31,"./multiply":32,"./ortho":33,"./perspective":34,"./perspectiveFromFieldOfView":35,"./rotate":36,"./rotateX":37,"./rotateY":38,"./rotateZ":39,"./scale":40,"./str":41,"./translate":42,"./transpose":43}],30:[function(e,t,r){t.exports=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],f=t[9],h=t[10],p=t[11],d=t[12],g=t[13],m=t[14],y=t[15],v=r*s-n*a,_=r*u-i*a,b=r*l-o*a,w=n*u-i*s,E=n*l-o*s,A=i*l-o*u,x=c*g-f*d,T=c*m-h*d,R=c*y-p*d,j=f*m-h*g,S=f*y-p*g,I=h*y-p*m,L=v*I-_*S+b*j+w*R-E*T+A*x;if(!L)return null;return L=1/L,e[0]=(s*I-u*S+l*j)*L,e[1]=(i*S-n*I-o*j)*L,e[2]=(g*A-m*E+y*w)*L,e[3]=(h*E-f*A-p*w)*L,e[4]=(u*R-a*I-l*T)*L,e[5]=(r*I-i*R+o*T)*L,e[6]=(m*b-d*A-y*_)*L,e[7]=(c*A-h*b+p*_)*L,e[8]=(a*S-s*R+l*x)*L,e[9]=(n*R-r*S-o*x)*L,e[10]=(d*E-g*b+y*v)*L,e[11]=(f*b-c*E-p*v)*L,e[12]=(s*T-a*j-u*x)*L,e[13]=(r*j-n*T+i*x)*L,e[14]=(g*_-d*w-m*v)*L,e[15]=(c*w-f*_+h*v)*L,e}},{}],31:[function(e,t,r){var A=e("./identity");t.exports=function(e,t,r,n){var i,o,a,s,u,l,c,f,h,p,d=t[0],g=t[1],m=t[2],y=n[0],v=n[1],_=n[2],b=r[0],w=r[1],E=r[2];if(Math.abs(d-b)<1e-6&&Math.abs(g-w)<1e-6&&Math.abs(m-E)<1e-6)return A(e);c=d-b,f=g-w,h=m-E,p=1/Math.sqrt(c*c+f*f+h*h),i=v*(h*=p)-_*(f*=p),o=_*(c*=p)-y*h,a=y*f-v*c,(p=Math.sqrt(i*i+o*o+a*a))?(i*=p=1/p,o*=p,a*=p):a=o=i=0;s=f*a-h*o,u=h*i-c*a,l=c*o-f*i,(p=Math.sqrt(s*s+u*u+l*l))?(s*=p=1/p,u*=p,l*=p):l=u=s=0;return e[0]=i,e[1]=s,e[2]=c,e[3]=0,e[4]=o,e[5]=u,e[6]=f,e[7]=0,e[8]=a,e[9]=l,e[10]=h,e[11]=0,e[12]=-(i*d+o*g+a*m),e[13]=-(s*d+u*g+l*m),e[14]=-(c*d+f*g+h*m),e[15]=1,e}},{"./identity":28}],32:[function(e,t,r){t.exports=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],h=t[9],p=t[10],d=t[11],g=t[12],m=t[13],y=t[14],v=t[15],_=r[0],b=r[1],w=r[2],E=r[3];return e[0]=_*n+b*s+w*f+E*g,e[1]=_*i+b*u+w*h+E*m,e[2]=_*o+b*l+w*p+E*y,e[3]=_*a+b*c+w*d+E*v,_=r[4],b=r[5],w=r[6],E=r[7],e[4]=_*n+b*s+w*f+E*g,e[5]=_*i+b*u+w*h+E*m,e[6]=_*o+b*l+w*p+E*y,e[7]=_*a+b*c+w*d+E*v,_=r[8],b=r[9],w=r[10],E=r[11],e[8]=_*n+b*s+w*f+E*g,e[9]=_*i+b*u+w*h+E*m,e[10]=_*o+b*l+w*p+E*y,e[11]=_*a+b*c+w*d+E*v,_=r[12],b=r[13],w=r[14],E=r[15],e[12]=_*n+b*s+w*f+E*g,e[13]=_*i+b*u+w*h+E*m,e[14]=_*o+b*l+w*p+E*y,e[15]=_*a+b*c+w*d+E*v,e}},{}],33:[function(e,t,r){t.exports=function(e,t,r,n,i,o,a){var s=1/(t-r),u=1/(n-i),l=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+r)*s,e[13]=(i+n)*u,e[14]=(a+o)*l,e[15]=1,e}},{}],34:[function(e,t,r){t.exports=function(e,t,r,n,i){var o=1/Math.tan(t/2),a=1/(n-i);return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+n)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*n*a,e[15]=0,e}},{}],35:[function(e,t,r){t.exports=function(e,t,r,n){var i=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),u=2/(a+s),l=2/(i+o);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(a-s)*u*.5,e[9]=(i-o)*l*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e}},{}],36:[function(e,t,r){t.exports=function(e,t,r,n){var i,o,a,s,u,l,c,f,h,p,d,g,m,y,v,_,b,w,E,A,x,T,R,j,S=n[0],I=n[1],L=n[2],N=Math.sqrt(S*S+I*I+L*L);if(Math.abs(N)<1e-6)return null;S*=N=1/N,I*=N,L*=N,i=Math.sin(r),o=Math.cos(r),a=1-o,s=t[0],u=t[1],l=t[2],c=t[3],f=t[4],h=t[5],p=t[6],d=t[7],g=t[8],m=t[9],y=t[10],v=t[11],_=S*S*a+o,b=I*S*a+L*i,w=L*S*a-I*i,E=S*I*a-L*i,A=I*I*a+o,x=L*I*a+S*i,T=S*L*a+I*i,R=I*L*a-S*i,j=L*L*a+o,e[0]=s*_+f*b+g*w,e[1]=u*_+h*b+m*w,e[2]=l*_+p*b+y*w,e[3]=c*_+d*b+v*w,e[4]=s*E+f*A+g*x,e[5]=u*E+h*A+m*x,e[6]=l*E+p*A+y*x,e[7]=c*E+d*A+v*x,e[8]=s*T+f*R+g*j,e[9]=u*T+h*R+m*j,e[10]=l*T+p*R+y*j,e[11]=c*T+d*R+v*j,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e}},{}],37:[function(e,t,r){t.exports=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[4],a=t[5],s=t[6],u=t[7],l=t[8],c=t[9],f=t[10],h=t[11];t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[4]=o*i+l*n,e[5]=a*i+c*n,e[6]=s*i+f*n,e[7]=u*i+h*n,e[8]=l*i-o*n,e[9]=c*i-a*n,e[10]=f*i-s*n,e[11]=h*i-u*n,e}},{}],38:[function(e,t,r){t.exports=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],u=t[3],l=t[8],c=t[9],f=t[10],h=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=o*i-l*n,e[1]=a*i-c*n,e[2]=s*i-f*n,e[3]=u*i-h*n,e[8]=o*n+l*i,e[9]=a*n+c*i,e[10]=s*n+f*i,e[11]=u*n+h*i,e}},{}],39:[function(e,t,r){t.exports=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],u=t[3],l=t[4],c=t[5],f=t[6],h=t[7];t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=o*i+l*n,e[1]=a*i+c*n,e[2]=s*i+f*n,e[3]=u*i+h*n,e[4]=l*i-o*n,e[5]=c*i-a*n,e[6]=f*i-s*n,e[7]=h*i-u*n,e}},{}],40:[function(e,t,r){t.exports=function(e,t,r){var n=r[0],i=r[1],o=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},{}],41:[function(e,t,r){t.exports=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}},{}],42:[function(e,t,r){t.exports=function(e,t,r){var n,i,o,a,s,u,l,c,f,h,p,d,g=r[0],m=r[1],y=r[2];t===e?(e[12]=t[0]*g+t[4]*m+t[8]*y+t[12],e[13]=t[1]*g+t[5]*m+t[9]*y+t[13],e[14]=t[2]*g+t[6]*m+t[10]*y+t[14],e[15]=t[3]*g+t[7]*m+t[11]*y+t[15]):(n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],h=t[9],p=t[10],d=t[11],e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=u,e[6]=l,e[7]=c,e[8]=f,e[9]=h,e[10]=p,e[11]=d,e[12]=n*g+s*m+f*y+t[12],e[13]=i*g+u*m+h*y+t[13],e[14]=o*g+l*m+p*y+t[14],e[15]=a*g+c*m+d*y+t[15]);return e}},{}],43:[function(e,t,r){t.exports=function(e,t){if(e===t){var r=t[1],n=t[2],i=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}},{}],44:[function(e,t,r){"use strict";var n=e("game-shell"),c=e("webglew");t.exports=function(i){var o=(i=i||{}).extensions||[],a=n(i),s=a.scale||1,u=i.glOptions;function l(){var e=a._width/s|0,t=a._height/s|0;a.canvas.width=e,a.canvas.height=t,a.canvas.style.width=a._width+"px",a.canvas.style.height=a._height+"px",a.emit("gl-resize",e,t)}return a.on("init",function(){var e=document.createElement("canvas"),t=e.getContext("webgl",u)||e.getContext("experimental-webgl",u);if(t){for(var r=c(t),n=0;n<o.length;++n)if(!(o[n]in r))return void a.emit("gl-error",new Error("Missing extension: "+o[n]));e.style.position="absolute",e.style.left="0px",e.style.top="0px",a.element.appendChild(e),a.canvas=e,a.gl=t,l(),a.clearFlags=void 0===i.clearFlags?t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT:i.clearFlags,a.clearColor=i.clearColor||[0,0,0,0],a.clearDepth=i.clearDepth||1,a.clearStencil=i.clearStencil||0,a.on("resize",l),a.on("render",function(e){t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,a._width/s|0,a._height/s|0),a.clearFlags&t.STENCIL_BUFFER_BIT&&t.clearStencil(a.clearStencil),a.clearFlags&t.COLOR_BUFFER_BIT&&t.clearColor(a.clearColor[0],a.clearColor[1],a.clearColor[2],a.clearColor[3]),a.clearFlags&t.DEPTH_BUFFER_BIT&&t.clearDepth(a.clearDepth),a.clearFlags&&t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT),a.emit("gl-render",e)}),a.emit("gl-init")}else a.emit("gl-error",new Error("Unable to initialize WebGL"))}),Object.defineProperty(a,"scale",{get:function(){return s},set:function(e){return(e=+e)<=0||isNaN(e)||s===e||(s=e,l()),s}}),Object.defineProperty(a,"width",{get:function(){return a._width/s|0}}),Object.defineProperty(a,"height",{get:function(){return a._height/s|0}}),Object.defineProperty(a,"mouse",{get:function(){return[a.mouseX/s,a.mouseY/s]}}),Object.defineProperty(a,"prevMouse",{get:function(){return[a.prevMouseX/s,a.prevMouseY/s]}}),a}},{"game-shell":17,webglew:71}],45:[function(e,t,r){"use strict";function h(e,t,r,n,i,o,a){this._gl=e,this._program=t,this._location=r,this._dimension=n,this._name=i,this._constFunc=o,this._relink=a}t.exports=function(e,t,r,n){for(var i={},o=0,a=r.length;o<a;++o){var s=r[o],u=s.name,l=s.type,c=e.getAttribLocation(t,u);switch(l){case"bool":case"int":case"float":p(e,t,c,1,i,u,n);break;default:if(!(0<=l.indexOf("vec")))throw new Error("gl-shader: Unknown data type for attribute "+u+": "+l);var f=l.charCodeAt(l.length-1)-48;if(f<2||4<f)throw new Error("gl-shader: Invalid data type for attribute "+u+": "+l);p(e,t,c,f,i,u,n)}}return i};var n=h.prototype;function p(t,e,r,n,i,o,a){for(var s=["gl","v"],u=[],l=0;l<n;++l)s.push("x"+l),u.push("x"+l);s.push(["if(x0.length===void 0){return gl.vertexAttrib",n,"f(v,",u.join(),")}else{return gl.vertexAttrib",n,"fv(v,x0)}"].join(""));var c=Function.apply(void 0,s),f=new h(t,e,r,n,o,c,a);Object.defineProperty(i,o,{set:function(e){return t.disableVertexAttribArray(f._location),c(t,f._location,e),e},get:function(){return f},enumerable:!0})}n.pointer=function(e,t,r,n){var i=this._gl;i.vertexAttribPointer(this._location,this._dimension,e||i.FLOAT,!!t,r||0,n||0),this._gl.enableVertexAttribArray(this._location)},Object.defineProperty(n,"location",{get:function(){return this._location},set:function(e){e!==this._location&&(this._location=e,this._gl.bindAttribLocation(this._program,e,this._name),this._gl.linkProgram(this._program),this._relink())}})},{}],46:[function(e,t,r){"use strict";var s=e("dup"),n=e("./reflect");function p(e){return new Function("y","return function(){return y}")(e)}t.exports=function(u,l,c,f){function h(e,t,r){switch(r){case"bool":case"int":case"sampler2D":case"samplerCube":return"gl.uniform1i(locations["+t+"],obj"+e+")";case"float":return"gl.uniform1f(locations["+t+"],obj"+e+")";default:var n=r.indexOf("vec");if(!(0<=n&&n<=1&&r.length===4+n)){if(0===r.indexOf("mat")&&4===r.length){var i=r.charCodeAt(r.length-1)-48;if(i<2||4<i)throw new Error("gl-shader: Invalid uniform dimension type for matrix "+name+": "+r);return"gl.uniformMatrix"+i+"fv(locations["+t+"],false,obj"+e+")"}throw new Error("gl-shader: Unknown uniform data type for "+name+": "+r)}var i=r.charCodeAt(r.length-1)-48;if(i<2||4<i)throw new Error("gl-shader: Invalid data type");switch(r.charAt(0)){case"b":case"i":return"gl.uniform"+i+"iv(locations["+t+"],obj"+e+")";case"v":return"gl.uniform"+i+"fv(locations["+t+"],obj"+e+")";default:throw new Error("gl-shader: Unrecognized data type for vector "+name+": "+r)}}}function o(e){for(var t=["return function updateProperty(obj){"],r=function e(t,r){if("object"!=typeof r)return[[t,r]];var n=[];for(var i in r){var o=r[i],a=t;parseInt(i)+""===i?a+="["+i+"]":a+="."+i,"object"==typeof o?n.push.apply(n,e(a,o)):n.push([a,o])}return n}("",e),n=0;n<r.length;++n){var i=r[n],o=i[0],a=i[1];f[a]&&t.push(h(o,a,c[a].type))}t.push("return obj}");var s=new Function("gl","prog","locations",t.join("\n"));return s(u,l,f)}function i(e,t,r){if("object"==typeof r){var n=a(r);Object.defineProperty(e,t,{get:p(n),set:o(r),enumerable:!0,configurable:!1})}else f[r]?Object.defineProperty(e,t,{get:(i=r,new Function("gl","prog","locations","return function(){return gl.getUniform(prog,locations["+i+"])}")(u,l,f)),set:o(r),enumerable:!0,configurable:!1}):e[t]=function(e){switch(e){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var t=e.indexOf("vec");if(0<=t&&t<=1&&e.length===4+t){var r=e.charCodeAt(e.length-1)-48;if(r<2||4<r)throw new Error("gl-shader: Invalid data type");return"b"===e.charAt(0)?s(r,!1):s(r)}if(0===e.indexOf("mat")&&4===e.length){var r=e.charCodeAt(e.length-1)-48;if(r<2||4<r)throw new Error("gl-shader: Invalid uniform dimension type for matrix "+name+": "+e);return s([r,r])}throw new Error("gl-shader: Unknown uniform data type for "+name+": "+e)}}(c[r].type);var i}function a(e){var t;if(Array.isArray(e)){t=new Array(e.length);for(var r=0;r<e.length;++r)i(t,r,e[r])}else for(var n in t={},e)i(t,n,e[n]);return t}var e=n(c,!0);return{get:p(a(e)),set:o(e),enumerable:!0,configurable:!0}}},{"./reflect":47,dup:12}],47:[function(e,t,r){"use strict";t.exports=function(e,t){for(var r={},n=0;n<e.length;++n)for(var i=e[n].name,o=i.split("."),a=r,s=0;s<o.length;++s){var u=o[s].split("[");if(1<u.length){u[0]in a||(a[u[0]]=[]),a=a[u[0]];for(var l=1;l<u.length;++l){var c=parseInt(u[l]);l<u.length-1||s<o.length-1?(c in a||(l<u.length-1?a[c]=[]:a[c]={}),a=a[c]):a[c]=t?n:e[n].type}}else s<o.length-1?(u[0]in a||(a[u[0]]={}),a=a[u[0]]):a[u[0]]=t?n:e[n].type}return r}},{}],48:[function(e,t,r){"use strict";var a=e("./lib/create-uniforms"),s=e("./lib/create-attributes"),u=e("./lib/reflect");function c(e,t,r,n){this.gl=e,this.handle=t,this.attributes=null,this.uniforms=null,this.types=null,this.vertexShader=r,this.fragmentShader=n}c.prototype.bind=function(){this.gl.useProgram(this.handle)},c.prototype.dispose=function(){var e=this.gl;e.deleteShader(this.vertexShader),e.deleteShader(this.fragmentShader),e.deleteProgram(this.handle)},c.prototype.updateExports=function(e,t){var r=new Array(e.length),n=this.handle,i=this.gl,o=function(e,t,r,n){for(var i=0;i<n.length;++i)r[i]=e.getUniformLocation(t,n[i].name)}.bind(void 0,i,n,r,e);o(),this.types={uniforms:u(e),attributes:u(t)},this.attributes=s(i,n,t,o),Object.defineProperty(this,"uniforms",a(i,n,e,r))},t.exports=function(t,e,r,n,i){var o=t.createShader(t.VERTEX_SHADER);if(t.shaderSource(o,e),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS)){var a=t.getShaderInfoLog(o);throw console.error("gl-shader: Error compling vertex shader:",a),new Error("gl-shader: Error compiling vertex shader:"+a)}var s=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(s,r),t.compileShader(s),!t.getShaderParameter(s,t.COMPILE_STATUS))throw a=t.getShaderInfoLog(s),console.error("gl-shader: Error compiling fragment shader:",a),new Error("gl-shader: Error compiling fragment shader:"+a);var u=t.createProgram();if(t.attachShader(u,s),t.attachShader(u,o),i.forEach(function(e){"number"==typeof e.location&&t.bindAttribLocation(u,e.location,e.name)}),t.linkProgram(u),!t.getProgramParameter(u,t.LINK_STATUS))throw a=t.getProgramInfoLog(u),console.error("gl-shader: Error linking shader program:",a),new Error("gl-shader: Error linking shader program:"+a);var l=new c(t,u,o,s);return l.updateExports(n,i),l}},{"./lib/create-attributes":45,"./lib/create-uniforms":46,"./lib/reflect":47}],49:[function(e,t,r){"use strict";var y=e("ndarray"),v=e("ndarray-ops"),_=e("typedarray-pool");t.exports=function(e){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");f||(f=[(t=e).LINEAR,t.NEAREST_MIPMAP_LINEAR,t.LINEAR_MIPMAP_NEAREST,t.LINEAR_MIPMAP_NEAREST],h=[t.NEAREST,t.LINEAR,t.NEAREST_MIPMAP_NEAREST,t.NEAREST_MIPMAP_LINEAR,t.LINEAR_MIPMAP_NEAREST,t.LINEAR_MIPMAP_LINEAR],p=[t.REPEAT,t.CLAMP_TO_EDGE,t.MIRRORED_REPEAT]);var t;if("number"==typeof arguments[1])return E(e,arguments[1],arguments[2],arguments[3]||e.RGBA,arguments[4]||e.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return E(e,0|arguments[1][0],0|arguments[1][1],arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var r=arguments[1],n=d(r)?r:r.raw;if(n)return i=e,o=n,a=0|r.width,s=0|r.height,u=arguments[2]||e.RGBA,l=arguments[3]||e.UNSIGNED_BYTE,c=m(i),i.texImage2D(i.TEXTURE_2D,0,u,u,l,o),new g(i,c,a,s,u,l);if(r.shape&&r.data&&r.stride)return function(e,t){var r=t.dtype,n=t.shape.slice(),i=e.getParameter(e.MAX_TEXTURE_SIZE);if(n[0]<0||n[0]>i||n[1]<0||n[1]>i)throw new Error("gl-texture2d: Invalid texture size");var o=w(n,t.stride.slice()),a=0;"float32"===r?a=e.FLOAT:"float64"===r?(a=e.FLOAT,o=!1,r="float32"):"uint8"===r?a=e.UNSIGNED_BYTE:(a=e.UNSIGNED_BYTE,o=!1,r="uint8");var s,u,l=0;if(2===n.length)l=e.LUMINANCE,n=[n[0],n[1],1],t=y(t.data,n,[t.stride[0],t.stride[1],1],t.offset);else{if(3!==n.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===n[2])l=e.ALPHA;else if(2===n[2])l=e.LUMINANCE_ALPHA;else if(3===n[2])l=e.RGB;else{if(4!==n[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");l=e.RGBA}}a!==e.FLOAT||e.getExtension("OES_texture_float")||(a=e.UNSIGNED_BYTE,o=!1);var c=t.size;if(o)s=0===t.offset&&t.data.length===c?t.data:t.data.subarray(t.offset,t.offset+c);else{var f=[n[2],n[2]*n[0],1];u=_.malloc(c,r);var h=y(u,n,f,0);"float32"!==r&&"float64"!==r||a!==e.UNSIGNED_BYTE?v.assign(h,t):b(h,t),s=u.subarray(0,c)}var p=m(e);e.texImage2D(e.TEXTURE_2D,0,l,n[0],n[1],0,l,a,s),o||_.free(u);return new g(e,p,n[0],n[1],l,a)}(e,r)}var i,o,a,s,u,l,c;throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var f=null,h=null,p=null;function d(e){return"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&e instanceof ImageData}var b=function(e,t){v.muls(e,t,255)};function n(e,t,r){var n=e.gl,i=n.getParameter(n.MAX_TEXTURE_SIZE);if(t<0||i<t||r<0||i<r)throw new Error("gl-texture2d: Invalid texture size");return e._shape=[t,r],e.bind(),n.texImage2D(n.TEXTURE_2D,0,e.format,t,r,0,e.format,e.type,null),e._mipLevels=[0],e}function g(e,t,r,n,i,o){this.gl=e,this.handle=t,this.format=i,this.type=o,this._shape=[r,n],this._mipLevels=[0],this._magFilter=e.NEAREST,this._minFilter=e.NEAREST,this._wrapS=e.CLAMP_TO_EDGE,this._wrapT=e.CLAMP_TO_EDGE,this._anisoSamples=1;var a=this,s=[this._wrapS,this._wrapT];Object.defineProperties(s,[{get:function(){return a._wrapS},set:function(e){return a.wrapS=e}},{get:function(){return a._wrapT},set:function(e){return a.wrapT=e}}]),this._wrapVector=s;var u=[this._shape[0],this._shape[1]];Object.defineProperties(u,[{get:function(){return a._shape[0]},set:function(e){return a.width=e}},{get:function(){return a._shape[1]},set:function(e){return a.height=e}}]),this._shapeVector=u}var i=g.prototype;function w(e,t){return 3===e.length?1===t[2]&&t[1]===e[0]*e[2]&&t[0]===e[2]:1===t[0]&&t[1]===e[0]}function m(e){var t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t}function E(e,t,r,n,i){var o=e.getParameter(e.MAX_TEXTURE_SIZE);if(t<0||o<t||r<0||o<r)throw new Error("gl-texture2d: Invalid texture shape");if(i===e.FLOAT&&!e.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var a=m(e);return e.texImage2D(e.TEXTURE_2D,0,n,t,r,0,n,i,null),new g(e,a,t,r,n,i)}Object.defineProperties(i,{minFilter:{get:function(){return this._minFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&0<=f.indexOf(e)&&(t.getExtension("OES_texture_float_linear")||(e=t.NEAREST)),h.indexOf(e)<0)throw new Error("gl-texture2d: Unknown filter mode "+e);return t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e),this._minFilter=e}},magFilter:{get:function(){return this._magFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&0<=f.indexOf(e)&&(t.getExtension("OES_texture_float_linear")||(e=t.NEAREST)),h.indexOf(e)<0)throw new Error("gl-texture2d: Unknown filter mode "+e);return t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e),this._magFilter=e}},mipSamples:{get:function(){return this._anisoSamples},set:function(e){var t=this._anisoSamples;if(this._anisoSamples=0|Math.max(e,1),t!==this._anisoSamples){var r=this.gl.getExtension("EXT_texture_filter_anisotropic");r&&this.gl.texParameterf(this.gl.TEXTURE_2D,r.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(e){if(this.bind(),p.indexOf(e)<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,e),this._wrapS=e}},wrapT:{get:function(){return this._wrapT},set:function(e){if(this.bind(),p.indexOf(e)<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,e),this._wrapT=e}},wrap:{get:function(){return this._wrapVector},set:function(e){if(Array.isArray(e)||(e=[e,e]),2!==e.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var t=0;t<2;++t)if(p.indexOf(e[t])<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);this._wrapS=e[0],this._wrapT=e[1];var r=this.gl;return this.bind(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this._wrapS),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this._wrapT),e}},shape:{get:function(){return this._shapeVector},set:function(e){if(Array.isArray(e)){if(2!==e.length)throw new Error("gl-texture2d: Invalid texture shape")}else e=[0|e,0|e];return n(this,0|e[0],0|e[1]),[0|e[0],0|e[1]]}},width:{get:function(){return this._shape[0]},set:function(e){return n(this,e|=0,this._shape[1]),e}},height:{get:function(){return this._shape[1]},set:function(e){return e|=0,n(this,this._shape[0],e),e}}}),i.bind=function(e){var t=this.gl;return void 0!==e&&t.activeTexture(t.TEXTURE0+(0|e)),t.bindTexture(t.TEXTURE_2D,this.handle),void 0!==e?0|e:t.getParameter(t.ACTIVE_TEXTURE)-t.TEXTURE0},i.dispose=function(){this.gl.deleteTexture(this.handle)},i.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var e=Math.min(this._shape[0],this._shape[1]),t=0;0<e;++t,e>>>=1)this._mipLevels.indexOf(t)<0&&this._mipLevels.push(t)},i.setPixels=function(e,t,r,n){var i=this.gl;this.bind(),Array.isArray(t)?(n=r,r=0|t[1],t=0|t[0]):(t=t||0,r=r||0),n=n||0;var o=d(e)?e:e.raw;if(o){this._mipLevels.indexOf(n)<0?(i.texImage2D(i.TEXTURE_2D,0,this.format,this.format,this.type,o),this._mipLevels.push(n)):i.texSubImage2D(i.TEXTURE_2D,n,t,r,this.format,this.type,o)}else{if(!(e.shape&&e.stride&&e.data))throw new Error("gl-texture2d: Unsupported data type");if(e.shape.length<2||t+e.shape[1]>this._shape[1]>>>n||r+e.shape[0]>this._shape[0]>>>n||t<0||r<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function(e,t,r,n,i,o,a,s){var u=s.dtype,l=s.shape.slice();if(l.length<2||3<l.length)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var c=0,f=0,h=w(l,s.stride.slice());"float32"===u?c=e.FLOAT:"float64"===u?(c=e.FLOAT,h=!1,u="float32"):"uint8"===u?c=e.UNSIGNED_BYTE:(c=e.UNSIGNED_BYTE,h=!1,u="uint8");if(2===l.length)f=e.LUMINANCE,l=[l[0],l[1],1],s=y(s.data,l,[s.stride[0],s.stride[1],1],s.offset);else{if(3!==l.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===l[2])f=e.ALPHA;else if(2===l[2])f=e.LUMINANCE_ALPHA;else if(3===l[2])f=e.RGB;else{if(4!==l[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");f=e.RGBA}l[2]}f!==e.LUMINANCE&&f!==e.ALPHA||i!==e.LUMINANCE&&i!==e.ALPHA||(f=i);if(f!==i)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var p=s.size,d=a.indexOf(n)<0;d&&a.push(n);if(c===o&&h)0===s.offset&&s.data.length===p?d?e.texImage2D(e.TEXTURE_2D,n,i,l[0],l[1],0,i,o,s.data):e.texSubImage2D(e.TEXTURE_2D,n,t,r,l[0],l[1],i,o,s.data):d?e.texImage2D(e.TEXTURE_2D,n,i,l[0],l[1],0,i,o,s.data.subarray(s.offset,s.offset+p)):e.texSubImage2D(e.TEXTURE_2D,n,t,r,l[0],l[1],i,o,s.data.subarray(s.offset,s.offset+p));else{var g;g=o===e.FLOAT?_.mallocFloat32(p):_.mallocUint8(p);var m=y(g,l,[l[2],l[2]*l[0],1]);c===e.FLOAT&&o===e.UNSIGNED_BYTE?b(m,s):v.assign(m,s),d?e.texImage2D(e.TEXTURE_2D,n,i,l[0],l[1],0,i,o,g.subarray(0,p)):e.texSubImage2D(e.TEXTURE_2D,n,t,r,l[0],l[1],i,o,g.subarray(0,p)),o===e.FLOAT?_.freeFloat32(g):_.freeUint8(g)}}(i,t,r,n,this.format,this.type,this._mipLevels,e)}}},{ndarray:62,"ndarray-ops":61,"typedarray-pool":64}],50:[function(e,t,r){"use strict";t.exports=function(e,t,r){t?t.bind():e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);var n=0|e.getParameter(e.MAX_VERTEX_ATTRIBS);if(r){if(r.length>n)throw new Error("gl-vao: Too many vertex attributes");for(var i=0;i<r.length;++i){var o=r[i];if(o.buffer){var a=o.buffer,s=o.size||4,u=o.type||e.FLOAT,l=!!o.normalized,c=o.stride||0,f=o.offset||0;a.bind(),e.enableVertexAttribArray(i),e.vertexAttribPointer(i,s,u,l,c,f)}else{if("number"==typeof o)e.vertexAttrib1f(i,o);else if(1===o.length)e.vertexAttrib1f(i,o[0]);else if(2===o.length)e.vertexAttrib2f(i,o[0],o[1]);else if(3===o.length)e.vertexAttrib3f(i,o[0],o[1],o[2]);else{if(4!==o.length)throw new Error("gl-vao: Invalid vertex attribute");e.vertexAttrib4f(i,o[0],o[1],o[2],o[3])}e.disableVertexAttribArray(i)}}for(;i<n;++i)e.disableVertexAttribArray(i)}else for(e.bindBuffer(e.ARRAY_BUFFER,null),i=0;i<n;++i)e.disableVertexAttribArray(i)}},{}],51:[function(e,t,r){"use strict";var n=e("./do-bind.js");function i(e){this.gl=e,this._elements=null,this._attributes=null,this._elementsType=e.UNSIGNED_SHORT}i.prototype.bind=function(){n(this.gl,this._elements,this._attributes)},i.prototype.update=function(e,t,r){this._elements=t,this._attributes=e,this._elementsType=r||this.gl.UNSIGNED_SHORT},i.prototype.dispose=function(){},i.prototype.unbind=function(){},i.prototype.draw=function(e,t,r){r=r||0;var n=this.gl;this._elements?n.drawElements(e,t,this._elementsType,r):n.drawArrays(e,r,t)},t.exports=function(e){return new i(e)}},{"./do-bind.js":50}],52:[function(e,t,r){"use strict";var o=e("./do-bind.js");function a(e,t,r,n,i,o){this.location=e,this.dimension=t,this.a=r,this.b=n,this.c=i,this.d=o}function n(e,t,r){this.gl=e,this._ext=t,this.handle=r,this._attribs=[],this._useElements=!1,this._elementsType=e.UNSIGNED_SHORT}a.prototype.bind=function(e){switch(this.dimension){case 1:e.vertexAttrib1f(this.location,this.a);break;case 2:e.vertexAttrib2f(this.location,this.a,this.b);break;case 3:e.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:e.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},n.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var e=0;e<this._attribs.length;++e)this._attribs[e].bind(this.gl)},n.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},n.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},n.prototype.update=function(e,t,r){if(this.bind(),o(this.gl,t,e),this.unbind(),this._attribs.length=0,e)for(var n=0;n<e.length;++n){var i=e[n];"number"==typeof i?this._attribs.push(new a(n,1,i)):Array.isArray(i)&&this._attribs.push(new a(n,i.length,i[0],i[1],i[2],i[3]))}this._useElements=!!t,this._elementsType=r||this.gl.UNSIGNED_SHORT},n.prototype.draw=function(e,t,r){r=r||0;var n=this.gl;this._useElements?n.drawElements(e,t,this._elementsType,r):n.drawArrays(e,r,t)},t.exports=function(e,t){return new n(e,t,t.createVertexArrayOES())}},{"./do-bind.js":50}],53:[function(e,t,r){"use strict";var a=e("./lib/vao-native.js"),s=e("./lib/vao-emulated.js");function u(e){this.bindVertexArrayOES=e.bindVertexArray.bind(e),this.createVertexArrayOES=e.createVertexArray.bind(e),this.deleteVertexArrayOES=e.deleteVertexArray.bind(e)}t.exports=function(e,t,r,n){var i,o=e.createVertexArray?new u(e):e.getExtension("OES_vertex_array_object");return(i=o?a(e,o):s(e)).update(t,r,n),i}},{"./lib/vao-emulated.js":51,"./lib/vao-native.js":52}],54:[function(e,t,r){t.exports=function(t,r,n,i){return function(e){return o(e,t,r,n,i)}};var o=e("gl-shader-core")},{"gl-shader-core":48}],55:[function(e,t,r){t.exports=function(){throw new Error("You should bundle your code using `glslify` as a transform.")}},{}],56:[function(e,t,r){r.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,l=u>>1,c=-7,f=r?i-1:0,h=r?-1:1,p=e[t+f];for(f+=h,o=p&(1<<-c)-1,p>>=-c,c+=s;0<c;o=256*o+e[t+f],f+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;0<c;a=256*a+e[t+f],f+=h,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=l}return(p?-1:1)*a*Math.pow(2,o-n)},r.write=function(e,t,r,n,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,f=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),2<=(t+=1<=a+f?h/u:h*Math.pow(2,1-f))*u&&(a++,u/=2),c<=a+f?(s=0,a=c):1<=a+f?(s=(t*u-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));8<=i;e[r+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,l+=i;0<l;e[r+p]=255&a,p+=d,a/=256,l-=8);e[r+p-d]|=128*g}},{}],57:[function(e,t,r){"use strict";t.exports=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t}},{}],58:[function(e,t,r){"use strict";t.exports=function(e){for(var t=new Array(e),r=0;r<e;++r)t[r]=r;return t}},{}],59:[function(e,t,r){var n=Array.isArray,i=Object.prototype.toString;t.exports=n||function(e){return!!e&&"[object Array]"==i.call(e)}},{}],60:[function(e,t,r){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}t.exports=function(e){return null!=e&&(n(e)||"function"==typeof(t=e).readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))||!!e._isBuffer);var t}},{}],61:[function(e,t,r){"use strict";var i=e("cwise-compiler"),n={body:"",args:[],thisVars:[],localVars:[]};function o(e){if(!e)return n;for(var t=0;t<e.args.length;++t){var r=e.args[t];e.args[t]=0===t?{name:r,lvalue:!0,rvalue:!!e.rvalue,count:e.count||1}:{name:r,lvalue:!1,rvalue:!0,count:1}}return e.thisVars||(e.thisVars=[]),e.localVars||(e.localVars=[]),e}function a(e){for(var t=[],r=0;r<e.args.length;++r)t.push("a"+r);var n;return new Function("P",["return function ",e.funcName,"_ndarrayops(",t.join(","),") {P(",t.join(","),");return a0}"].join(""))(i({args:(n=e).args,pre:o(n.pre),body:o(n.body),post:o(n.proc),funcName:n.funcName}))}var s={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var e in s){var t=s[e];r[e]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),r[e+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a"+t+"=b"},rvalue:!0,funcName:e+"eq"}),r[e+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),r[e+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a"+t+"=s"},rvalue:!0,funcName:e+"seq"})}}();var u={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var e in u){var t=u[e];r[e]=a({args:["array","array"],body:{args:["a","b"],body:"a="+t+"b"},funcName:e}),r[e+"eq"]=a({args:["array"],body:{args:["a"],body:"a="+t+"a"},rvalue:!0,count:2,funcName:e+"eq"})}}();var l={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var e in l){var t=l[e];r[e]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),r[e+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),r[e+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a=a"+t+"b"},rvalue:!0,count:2,funcName:e+"eq"}),r[e+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+t+"s"},rvalue:!0,count:2,funcName:e+"seq"})}}();var c=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var e=0;e<c.length;++e){var t=c[e];r[t]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:t}),r[t+"eq"]=a({args:["array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"})}}();var f=["max","min","atan2","pow"];!function(){for(var e=0;e<f.length;++e){var t=f[e];r[t]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t}),r[t+"s"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t+"s"}),r[t+"eq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"}),r[t+"seq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"seq"})}}();var h=["atan2","pow"];!function(){for(var e=0;e<h.length;++e){var t=h[e];r[t+"op"]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"op"}),r[t+"ops"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"ops"}),r[t+"opeq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opeq"}),r[t+"opseq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opseq"})}}(),r.any=i({args:["array"],pre:n,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),r.all=i({args:["array"],pre:n,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),r.sum=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),r.prod=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),r.norm2squared=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),r.norm2=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),r.norminf=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),r.norm1=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),r.sup=i({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),r.inf=i({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),r.argmin=i({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),r.argmax=i({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),r.random=a({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),r.assign=a({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),r.assigns=a({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),r.equals=i({args:["array","array"],pre:n,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":8}],62:[function(e,t,r){var g=e("iota-array"),l=e("is-buffer"),c="undefined"!=typeof Float64Array;function i(e,t){return e[0]-t[0]}function m(){var e,t=this.stride,r=new Array(t.length);for(e=0;e<r.length;++e)r[e]=[Math.abs(t[e]),e];r.sort(i);var n=new Array(r.length);for(e=0;e<n.length;++e)n[e]=r[e][1];return n}function f(e,t){var r=["View",t,"d",e].join("");t<0&&(r="View_Nil"+e);var n="generic"===e;if(-1===t){var i="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}";return new Function(i)()}if(0===t){i="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}";return new Function("TrivialArray",i)(y[e][0])}i=["'use strict'"];var o=g(t),a=o.map(function(e){return"i"+e}),s="this.offset+"+o.map(function(e){return"this.stride["+e+"]*i"+e}).join("+"),u=o.map(function(e){return"b"+e}).join(","),l=o.map(function(e){return"c"+e}).join(",");i.push("function "+r+"(a,"+u+","+l+",d){this.data=a","this.shape=["+u+"]","this.stride=["+l+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),i.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+o.map(function(e){return"this.shape["+e+"]"}).join("*"),"}})"),1===t?i.push("proto.order=[0]"):(i.push("Object.defineProperty(proto,'order',{get:"),t<4?(i.push("function "+r+"_order(){"),2===t?i.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&i.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):i.push("ORDER})")),i.push("proto.set=function "+r+"_set("+a.join(",")+",v){"),n?i.push("return this.data.set("+s+",v)}"):i.push("return this.data["+s+"]=v}"),i.push("proto.get=function "+r+"_get("+a.join(",")+"){"),n?i.push("return this.data.get("+s+")}"):i.push("return this.data["+s+"]}"),i.push("proto.index=function "+r+"_index(",a.join(),"){return "+s+"}"),i.push("proto.hi=function "+r+"_hi("+a.join(",")+"){return new "+r+"(this.data,"+o.map(function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")}).join(",")+","+o.map(function(e){return"this.stride["+e+"]"}).join(",")+",this.offset)}");var c=o.map(function(e){return"a"+e+"=this.shape["+e+"]"}),f=o.map(function(e){return"c"+e+"=this.stride["+e+"]"});i.push("proto.lo=function "+r+"_lo("+a.join(",")+"){var b=this.offset,d=0,"+c.join(",")+","+f.join(","));for(var h=0;h<t;++h)i.push("if(typeof i"+h+"==='number'&&i"+h+">=0){d=i"+h+"|0;b+=c"+h+"*d;a"+h+"-=d}");i.push("return new "+r+"(this.data,"+o.map(function(e){return"a"+e}).join(",")+","+o.map(function(e){return"c"+e}).join(",")+",b)}"),i.push("proto.step=function "+r+"_step("+a.join(",")+"){var "+o.map(function(e){return"a"+e+"=this.shape["+e+"]"}).join(",")+","+o.map(function(e){return"b"+e+"=this.stride["+e+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(h=0;h<t;++h)i.push("if(typeof i"+h+"==='number'){d=i"+h+"|0;if(d<0){c+=b"+h+"*(a"+h+"-1);a"+h+"=ceil(-a"+h+"/d)}else{a"+h+"=ceil(a"+h+"/d)}b"+h+"*=d}");i.push("return new "+r+"(this.data,"+o.map(function(e){return"a"+e}).join(",")+","+o.map(function(e){return"b"+e}).join(",")+",c)}");var p=new Array(t),d=new Array(t);for(h=0;h<t;++h)p[h]="a[i"+h+"]",d[h]="b[i"+h+"]";i.push("proto.transpose=function "+r+"_transpose("+a+"){"+a.map(function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+p.join(",")+","+d.join(",")+",this.offset)}"),i.push("proto.pick=function "+r+"_pick("+a+"){var a=[],b=[],c=this.offset");for(h=0;h<t;++h)i.push("if(typeof i"+h+"==='number'&&i"+h+">=0){c=(c+this.stride["+h+"]*i"+h+")|0}else{a.push(this.shape["+h+"]);b.push(this.stride["+h+"])}");return i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),i.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+o.map(function(e){return"shape["+e+"]"}).join(",")+","+o.map(function(e){return"stride["+e+"]"}).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",i.join("\n"))(y[e],m)}var y={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};t.exports=function(e,t,r,n){if(void 0===e)return(0,y.array[0])([]);"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var i=t.length;if(void 0===r){r=new Array(i);for(var o=i-1,a=1;0<=o;--o)r[o]=a,a*=t[o]}if(void 0===n)for(o=n=0;o<i;++o)r[o]<0&&(n-=(t[o]-1)*r[o]);for(var s=function(e){if(l(e))return"buffer";if(c)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(e)?"array":"generic"}(e),u=y[s];u.length<=i+1;)u.push(f(s,u.length-1));return(0,u[i+1])(e,t,r,n)}},{"iota-array":58,"is-buffer":60}],63:[function(e,t,r){var n=t.exports={};function i(){}n.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.MutationObserver,r="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};var n=[];if(t){var i=document.createElement("div");return new MutationObserver(function(){var e=n.slice();n.length=0,e.forEach(function(e){e()})}).observe(i,{attributes:!0}),function(e){n.length||i.setAttribute("yes","no"),n.push(e)}}return r?(window.addEventListener("message",function(e){var t=e.source;t!==window&&null!==t||"process-tick"!==e.data||(e.stopPropagation(),0<n.length&&n.shift()())},!0),function(e){n.push(e),window.postMessage("process-tick","*")}):function(e){setTimeout(e,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.on=i,n.addListener=i,n.once=i,n.off=i,n.removeListener=i,n.removeAllListeners=i,n.emit=i,n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")}},{}],64:[function(w,e,E){(function(e,n){"use strict";var i=w("bit-twiddle"),t=w("dup");e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:t([32,0]),UINT16:t([32,0]),UINT32:t([32,0]),INT8:t([32,0]),INT16:t([32,0]),INT32:t([32,0]),FLOAT:t([32,0]),DOUBLE:t([32,0]),DATA:t([32,0]),UINT8C:t([32,0]),BUFFER:t([32,0])});var r="undefined"!=typeof Uint8ClampedArray,o=e.__TYPEDARRAY_POOL;o.UINT8C||(o.UINT8C=t([32,0])),o.BUFFER||(o.BUFFER=t([32,0]));var a=o.DATA,s=o.BUFFER;function u(e){if(e){var t=e.length||e.byteLength,r=i.log2(t);a[r].push(e)}}function l(e){e=i.nextPow2(e);var t=i.log2(e),r=a[t];return 0<r.length?r.pop():new ArrayBuffer(e)}function c(e){return new Uint8Array(l(e),0,e)}function f(e){return new Uint16Array(l(2*e),0,e)}function h(e){return new Uint32Array(l(4*e),0,e)}function p(e){return new Int8Array(l(e),0,e)}function d(e){return new Int16Array(l(2*e),0,e)}function g(e){return new Int32Array(l(4*e),0,e)}function m(e){return new Float32Array(l(4*e),0,e)}function y(e){return new Float64Array(l(8*e),0,e)}function v(e){return r?new Uint8ClampedArray(l(e),0,e):c(e)}function _(e){return new DataView(l(e),0,e)}function b(e){e=i.nextPow2(e);var t=i.log2(e),r=s[t];return 0<r.length?r.pop():new n(e)}E.free=function(e){if(n.isBuffer(e))s[i.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,r=0|i.log2(t);a[r].push(e)}},E.freeUint8=E.freeUint16=E.freeUint32=E.freeInt8=E.freeInt16=E.freeInt32=E.freeFloat32=E.freeFloat=E.freeFloat64=E.freeDouble=E.freeUint8Clamped=E.freeDataView=function(e){u(e.buffer)},E.freeArrayBuffer=u,E.freeBuffer=function(e){s[i.log2(e.length)].push(e)},E.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return l(e);switch(t){case"uint8":return c(e);case"uint16":return f(e);case"uint32":return h(e);case"int8":return p(e);case"int16":return d(e);case"int32":return g(e);case"float":case"float32":return m(e);case"double":case"float64":return y(e);case"uint8_clamped":return v(e);case"buffer":return b(e);case"data":case"dataview":return _(e);default:return null}return null},E.mallocArrayBuffer=l,E.mallocUint8=c,E.mallocUint16=f,E.mallocUint32=h,E.mallocInt8=p,E.mallocInt16=d,E.mallocInt32=g,E.mallocFloat32=E.mallocFloat=m,E.mallocFloat64=E.mallocDouble=y,E.mallocUint8Clamped=v,E.mallocDataView=_,E.mallocBuffer=b,E.clearCache=function(){for(var e=0;e<32;++e)o.UINT8[e].length=0,o.UINT16[e].length=0,o.UINT32[e].length=0,o.INT8[e].length=0,o.INT16[e].length=0,o.INT32[e].length=0,o.FLOAT[e].length=0,o.DOUBLE[e].length=0,o.UINT8C[e].length=0,a[e].length=0,s[e].length=0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},w("buffer").Buffer)},{"bit-twiddle":5,buffer:7,dup:12}],65:[function(e,t,r){"use strict";t.exports=function(e,t,r){return 0===e.length?e:t?(r||e.sort(t),function(e,t){for(var r=1,n=e.length,i=e[0],o=e[0],a=1;a<n;++a)if(o=i,t(i=e[a],o)){if(a===r){r++;continue}e[r++]=i}return e.length=r,e}(e,t)):(r||e.sort(),function(e){for(var t=1,r=e.length,n=e[0],i=e[0],o=1;o<r;++o,i=n)if(i=n,(n=e[o])!==i){if(o===t){t++;continue}e[t++]=n}return e.length=t,e}(e))}},{}],66:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],67:[function(e,t,r){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],68:[function(h,e,j){(function(n,i){var s=/%[sdj%]/g;j.format=function(e){if(!b(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(u(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,o=String(e).replace(s,function(e){if("%%"===e)return"%";if(i<=r)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),a=n[r];r<i;a=n[++r])v(a)||!c(a)?o+=" "+a:o+=" "+u(a);return o},j.deprecate=function(e,t){if(w(i.process))return function(){return j.deprecate(e,t).apply(this,arguments)};if(!0===n.noDeprecation)return e;var r=!1;return function(){if(!r){if(n.throwDeprecation)throw new Error(t);n.traceDeprecation?console.trace(t):console.error(t),r=!0}return e.apply(this,arguments)}};var e,o={};function u(e,t){var r={seen:[],stylize:l};return 3<=arguments.length&&(r.depth=arguments[2]),4<=arguments.length&&(r.colors=arguments[3]),y(t)?r.showHidden=t:t&&j._extend(r,t),w(r.showHidden)&&(r.showHidden=!1),w(r.depth)&&(r.depth=2),w(r.colors)&&(r.colors=!1),w(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=a),p(r,e,r.depth)}function a(e,t){var r=u.styles[t];return r?"["+u.colors[r][0]+"m"+e+"["+u.colors[r][1]+"m":e}function l(e,t){return e}function p(t,r,n){if(t.customInspect&&r&&T(r.inspect)&&r.inspect!==j.inspect&&(!r.constructor||r.constructor.prototype!==r)){var e=r.inspect(n,t);return b(e)||(e=p(t,e,n)),e}var i=function(e,t){if(w(t))return e.stylize("undefined","undefined");if(b(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(_(t))return e.stylize(""+t,"number");if(y(t))return e.stylize(""+t,"boolean");if(v(t))return e.stylize("null","null")}(t,r);if(i)return i;var o,a=Object.keys(r),s=(o={},a.forEach(function(e,t){o[e]=!0}),o);if(t.showHidden&&(a=Object.getOwnPropertyNames(r)),x(r)&&(0<=a.indexOf("message")||0<=a.indexOf("description")))return d(r);if(0===a.length){if(T(r)){var u=r.name?": "+r.name:"";return t.stylize("[Function"+u+"]","special")}if(E(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(A(r))return t.stylize(Date.prototype.toString.call(r),"date");if(x(r))return d(r)}var l,c="",f=!1,h=["{","}"];(m(r)&&(f=!0,h=["[","]"]),T(r))&&(c=" [Function"+(r.name?": "+r.name:"")+"]");return E(r)&&(c=" "+RegExp.prototype.toString.call(r)),A(r)&&(c=" "+Date.prototype.toUTCString.call(r)),x(r)&&(c=" "+d(r)),0!==a.length||f&&0!=r.length?n<0?E(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),l=f?function(t,r,n,i,e){for(var o=[],a=0,s=r.length;a<s;++a)R(r,String(a))?o.push(g(t,r,n,i,String(a),!0)):o.push("");return e.forEach(function(e){e.match(/^\d+$/)||o.push(g(t,r,n,i,e,!0))}),o}(t,r,n,s,a):a.map(function(e){return g(t,r,n,s,e,f)}),t.seen.pop(),function(e,t,r){if(60<e.reduce(function(e,t){return 0,0<=t.indexOf("\n")&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0))return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(l,c,h)):h[0]+c+h[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function g(e,t,r,n,i,o){var a,s,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),R(n,i)||(a="["+i+"]"),s||(e.seen.indexOf(u.value)<0?-1<(s=v(r)?p(e,u.value,null):p(e,u.value,r-1)).indexOf("\n")&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),w(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function m(e){return Array.isArray(e)}function y(e){return"boolean"==typeof e}function v(e){return null===e}function _(e){return"number"==typeof e}function b(e){return"string"==typeof e}function w(e){return void 0===e}function E(e){return c(e)&&"[object RegExp]"===t(e)}function c(e){return"object"==typeof e&&null!==e}function A(e){return c(e)&&"[object Date]"===t(e)}function x(e){return c(e)&&("[object Error]"===t(e)||e instanceof Error)}function T(e){return"function"==typeof e}function t(e){return Object.prototype.toString.call(e)}function r(e){return e<10?"0"+e.toString(10):e.toString(10)}j.debuglog=function(t){if(w(e)&&(e=n.env.NODE_DEBUG||""),t=t.toUpperCase(),!o[t])if(new RegExp("\\b"+t+"\\b","i").test(e)){var r=n.pid;o[t]=function(){var e=j.format.apply(j,arguments);console.error("%s %d: %s",t,r,e)}}else o[t]=function(){};return o[t]},(j.inspect=u).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},j.isArray=m,j.isBoolean=y,j.isNull=v,j.isNullOrUndefined=function(e){return null==e},j.isNumber=_,j.isString=b,j.isSymbol=function(e){return"symbol"==typeof e},j.isUndefined=w,j.isRegExp=E,j.isObject=c,j.isDate=A,j.isError=x,j.isFunction=T,j.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},j.isBuffer=h("./support/isBuffer");var f=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function R(e,t){return Object.prototype.hasOwnProperty.call(e,t)}j.log=function(){var e,t;console.log("%s - %s",(e=new Date,t=[r(e.getHours()),r(e.getMinutes()),r(e.getSeconds())].join(":"),[e.getDate(),f[e.getMonth()],t].join(" ")),j.format.apply(j,arguments))},j.inherits=h("inherits"),j._extend=function(e,t){if(!t||!c(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(this,h("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":67,_process:63,inherits:66}],69:[function(e,t,r){var n,i="undefined"!=typeof window?window.navigator.userAgent:"",o=/OS X/.test(i),a=/Opera/.test(i),s=!/like Gecko/.test(i)&&!a,u=t.exports={0:o?"<menu>":"<UNK>",1:"<mouse 1>",2:"<mouse 2>",3:"<break>",4:"<mouse 3>",5:"<mouse 4>",6:"<mouse 5>",8:"<backspace>",9:"<tab>",12:"<clear>",13:"<enter>",16:"<shift>",17:"<control>",18:"<alt>",19:"<pause>",20:"<caps-lock>",21:"<ime-hangul>",23:"<ime-junja>",24:"<ime-final>",25:"<ime-kanji>",27:"<escape>",28:"<ime-convert>",29:"<ime-nonconvert>",30:"<ime-accept>",31:"<ime-mode-change>",27:"<escape>",32:"<space>",33:"<page-up>",34:"<page-down>",35:"<end>",36:"<home>",37:"<left>",38:"<up>",39:"<right>",40:"<down>",41:"<select>",42:"<print>",43:"<execute>",44:"<snapshot>",45:"<insert>",46:"<delete>",47:"<help>",91:"<meta>",92:"<meta>",93:o?"<meta>":"<menu>",95:"<sleep>",106:"<num-*>",107:"<num-+>",108:"<num-enter>",109:"<num--\x3e",110:"<num-.>",111:"<num-/>",144:"<num-lock>",145:"<scroll-lock>",160:"<shift-left>",161:"<shift-right>",162:"<control-left>",163:"<control-right>",164:"<alt-left>",165:"<alt-right>",166:"<browser-back>",167:"<browser-forward>",168:"<browser-refresh>",169:"<browser-stop>",170:"<browser-search>",171:"<browser-favorites>",172:"<browser-home>",173:o&&s?"-":"<volume-mute>",174:"<volume-down>",175:"<volume-up>",176:"<next-track>",177:"<prev-track>",178:"<stop>",179:"<play-pause>",180:"<launch-mail>",181:"<launch-media-select>",182:"<launch-app 1>",183:"<launch-app 2>",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"<meta>",224:"<meta>",226:"<alt-gr>",229:"<ime-process>",231:a?"`":"<unicode>",246:"<attention>",247:"<crsel>",248:"<exsel>",249:"<erase-eof>",250:"<play>",251:"<zoom>",252:"<no-name>",253:"<pa-1>",254:"<clear>"};for(n=58;n<65;++n)u[n]=String.fromCharCode(n);for(n=48;n<58;++n)u[n]=n-48+"";for(n=65;n<91;++n)u[n]=String.fromCharCode(n);for(n=96;n<106;++n)u[n]="<num-"+(n-96)+">";for(n=112;n<136;++n)u[n]="F"+(n-111)},{}],70:[function(e,b,t){!function(){"use strict";if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=g);var t=!1;if("function"==typeof WeakMap){var r=WeakMap;if("undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var e=new r,n=Object.freeze({});if(e.set(n,1),1===e.get(n))return b.exports=WeakMap;t=!0}}Object.prototype.hasOwnProperty;var i=Object.getOwnPropertyNames,o=Object.defineProperty,a=Object.isExtensible,s="weakmap:",u=s+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var l=new ArrayBuffer(25),c=new Uint8Array(l);crypto.getRandomValues(c),u=s+"rand:"+Array.prototype.map.call(c,function(e){return(e%36).toString(36)}).join("")+"___"}if(o(Object,"getOwnPropertyNames",{value:function(e){return i(e).filter(m)}}),"getPropertyNames"in Object){var f=Object.getPropertyNames;o(Object,"getPropertyNames",{value:function(e){return f(e).filter(m)}})}!function(){var t=Object.freeze;o(Object,"freeze",{value:function(e){return y(e),t(e)}});var r=Object.seal;o(Object,"seal",{value:function(e){return y(e),r(e)}});var n=Object.preventExtensions;o(Object,"preventExtensions",{value:function(e){return y(e),n(e)}})}();var h=!1,p=0,d=function(){this instanceof d||_();var i=[],o=[],a=p++;return Object.create(d.prototype,{get___:{value:v(function(e,t){var r,n=y(e);return n?a in n?n[a]:t:0<=(r=i.indexOf(e))?o[r]:t})},has___:{value:v(function(e){var t=y(e);return t?a in t:0<=i.indexOf(e)})},set___:{value:v(function(e,t){var r,n=y(e);return n?n[a]=t:0<=(r=i.indexOf(e))?o[r]=t:(r=i.length,o[r]=t,i[r]=e),this})},delete___:{value:v(function(e){var t,r,n=y(e);return n?a in n&&delete n[a]:!((t=i.indexOf(e))<0||(r=i.length-1,i[t]=void 0,o[t]=o[r],i[t]=i[r],i.length=r,o.length=r,0))})}})};d.prototype=Object.create(Object.prototype,{get:{value:function(e,t){return this.get___(e,t)},writable:!0,configurable:!0},has:{value:function(e){return this.has___(e)},writable:!0,configurable:!0},set:{value:function(e,t){return this.set___(e,t)},writable:!0,configurable:!0},delete:{value:function(e){return this.delete___(e)},writable:!0,configurable:!0}}),"function"==typeof r?function(){function e(){this instanceof d||_();var e,n=new r,i=void 0,o=!1;return e=t?function(e,t){return n.set(e,t),n.has(e)||(i||(i=new d),i.set(e,t)),this}:function(t,r){if(o)try{n.set(t,r)}catch(e){i||(i=new d),i.set___(t,r)}else n.set(t,r);return this},Object.create(d.prototype,{get___:{value:v(function(e,t){return i?n.has(e)?n.get(e):i.get___(e,t):n.get(e,t)})},has___:{value:v(function(e){return n.has(e)||!!i&&i.has___(e)})},set___:{value:v(e)},delete___:{value:v(function(e){var t=!!n.delete(e);return i&&i.delete___(e)||t})},permitHostObjects___:{value:v(function(e){if(e!==g)throw new Error("bogus call to permitHostObjects___");o=!0})}})}t&&"undefined"!=typeof Proxy&&(Proxy=void 0),e.prototype=d.prototype,b.exports=e,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),b.exports=d)}function g(e){e.permitHostObjects___&&e.permitHostObjects___(g)}function m(e){return!(e.substr(0,s.length)==s&&"___"===e.substr(e.length-3))}function y(e){if(e!==Object(e))throw new TypeError("Not an object: "+e);var t=e[u];if(t&&t.key===e)return t;if(a(e)){t={key:e};try{return o(e,u,{value:t,writable:!1,enumerable:!1,configurable:!1}),t}catch(e){return}}}function v(e){return e.prototype=null,Object.freeze(e)}function _(){h||"undefined"==typeof console||(h=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},{}],71:[function(e,t,r){"use strict";var u=new("undefined"==typeof WeakMap?e("weak-map"):WeakMap);t.exports=function(e){var t=u.get(e);if(t)return t;for(var r={},n=e.getSupportedExtensions(),i=0;i<n.length;++i){var o=n[i];if(0!==o.indexOf("MOZ_")){var a=e.getExtension(n[i]);if(a)for(;;){r[o]=a;var s=o.replace(/^[A-Z]+_/,"");if(s===o)break;o=s}}}return u.set(e,r),r}},{"weak-map":70}],72:[function(e,t,r){"use strict";var s,u,n,i,o=.01,a=.6,l=!1,c=Math.floor,f=Math.random;function h(e){var t;for(s=[],u=[],t=0;t<e;t++)d();g()}function p(){return f()*(a-o)+o}function d(){for(var e=0;e<9;e++)s.push(f());if(l){var t=s.length;s[t-1]=s[t-4]=s[t-7]}for(e=0;e<12;e++){var r=e%4==3?p():f();u.push(r)}}function g(){var e,t,r=[];for(e=0;e<s.length;e+=9){var n=(s[e+2]+s[e+5]+s[e+8])/3;r.push({index:e/9,z:n})}r.sort(m);var i=s.slice(),o=u.slice();for(e=0;e<r.length;e++){var a=r[e];for(t=0;t<9;t++)s[9*e+t]=i[9*a.index+t];for(t=0;t<12;t++)u[12*e+t]=o[12*a.index+t]}}function m(e,t){return e.z<t.z?1:-1}function y(){return s.length/3}var v={init:h,setArrays:function(e,t){s=e.slice(),u=t.slice()},sortPolygonsByZ:g,cacheDataNow:function(){n=s.slice(),i=u.slice()},restoreCachedData:function(){s=n,u=i},mutateVertex:function(){var e=c(y()*f());if(f()<.5)u[4*e]=f(),u[4*e+1]=f(),u[4*e+2]=f(),u[4*e+3]=p();else if(s[3*e]=f(),s[3*e+1]=f(),s[3*e+2]=f(),l){var t=s[3*e+2],r=c(e/3);s[9*r+2]=t,s[9*r+5]=t,s[9*r+8]=t}},mutateValue:function(){if(f()<.5){var e=c(u.length*f());u[e]=e%4==3?p():f()}else{var t=c(s.length/3*f()),r=l?2:3,n=c(f()*r);s[3*t+n]=f()}},addPoly:d,clonePoly:function(){var e=c(s.length/9*f());for(r=0;r<12;r++)u.push(u[12*e+r]);for(var t=c(3*f()),r=0;r<9;r++)c(r/3)!=t&&s.push(s[9*e+r]);for(r=0;r<3;r++)s.push(f());if(l){var n=s.length;s[n-1]=.5<f()?s[n-4]:s[n-7]}},removePoly:function(){if(!(s.length<18)){var e=c(s.length/9*f());s.splice(9*e,9),u.splice(12*e,12)}},setAlphaRange:function(e,t){e=parseFloat(e),t=parseFloat(t),o=Math.min(e,t),a=Math.max(e,t)},setFlattenedness:function(e){l=e},makeTestData:function(){h(3),s=[0,0,.5,1,0,.5,0,1,.5,1,1,1,1,0,1,0,1,1,0,0,0,0,1,0,1,1,0];u=[.7,0,0,.2,.7,0,0,.2,.7,0,0,.2,0,.7,0,1,0,.7,0,1,0,.7,0,1,0,0,.7,.2,0,0,.7,.2,0,0,.7,.2],g()}};Object.defineProperty(v,"numVerts",{get:function(){return y()}}),Object.defineProperty(v,"vertArr",{get:function(){return s}}),Object.defineProperty(v,"colArr",{get:function(){return u}}),Object.defineProperty(v,"minAlpha",{get:function(){return o}}),Object.defineProperty(v,"maxAlpha",{get:function(){return a}}),t.exports=v},{}]},{},[1]);